[{"id":"66d5432935a9e114e0c6473f5ec12a37","title":"å¦‚ä½•å†™å¥½JavaScriptä»£ç ","content":"å†™å¥½JSçš„ä¸‰ä¸ªåŸåˆ™å„å¸å…¶èŒWebå¤©ç„¶å…·æœ‰åˆ†å±‚çš„ä½“ç³»æ¶æ„ï¼ŒHTMLã€CSSã€JavaScriptå„è‡ªæ‰¿æ‹…ç€ç»“æ„ã€è¡¨ç°å’Œè¡Œä¸ºçš„è´£ä»»ï¼Œè¿™ç§é²œæ˜çš„ä¸‰å±‚ç»“æ„å°±èƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸ŠæŒ‡å¯¼æˆ‘ä»¬è®¾è®¡ä¸€ä¸ªé«˜å¯ç”¨ã€é«˜å¯æ‰©å±•çš„åº”ç”¨ã€‚\nç½‘é¡µæ¢è‚¤ä»¥ä¸€ä¸ªå…·å¤‡ ç™½å¤©/å¤œé—´ æ¨¡å¼åˆ‡æ¢çš„é¡µé¢ä¸ºä¾‹ï¼Œæˆ‘ä»¬å…ˆç»™å‡ºåŸºæœ¬çš„HTMLç»“æ„\n&lt;body>\n  &lt;input id=\"modeCheckbox\" type=\"checkbox\">\n  &lt;div class=\"content\">\n    &lt;header>\n      &lt;label id=\"modeBtn\" for=\"modeCheckbox\">â˜€ï¸&lt;/label>\n      &lt;h1>header&lt;/h1>\n    &lt;/header>\n    &lt;main>\n      content\n    &lt;/main>\n  &lt;/div>\n&lt;/body>\n\nè¿™é‡Œæœ‰å‡ ç§å®ç°æ–¹å¼ï¼š\n\né€šè¿‡JavaScriptåŠ¨æ€ä¿®æ”¹CSSæ ·å¼ã€‚\nconst btn = document.getElementById('modeBtn');\nbtn.addEventListener('click', (e) => &#123;\n  const body = document.body;\n  if(e.target.innerHTML === 'â˜€ï¸') &#123;\n    body.style.backgroundColor = 'black';\n    body.style.color = 'white';\n    e.target.innerHTML = 'ğŸŒ™';\n  &#125; else &#123;\n    body.style.backgroundColor = 'white';\n    body.style.color = 'black';\n    e.target.innerHTML = 'â˜€ï¸';\n  &#125;\n&#125;);\né€šè¿‡JavaScriptåŠ¨æ€ä¿®æ”¹Classç±»åï¼Œé—´æ¥ä¿®æ”¹CSSæ ·å¼ï¼ŒğŸŒ™â˜€ï¸çš„å˜åŒ–å¯ä»¥äº¤ç”±ä¼ªå…ƒç´ çš„contentå±æ€§ã€‚\n&lt;style>\n  .night &#123;\n    background-color: black\n    colr: white\n  &#125;\n&lt;/style>\n\nconst btn = document.getElementById('modeBtn');\nbtn.addEventListener('click', (e) => &#123;\n  const body = document.body;\n  if(body.className !== 'night') &#123;\n    body.className = 'nignt';\n  &#125; else &#123;\n    body.className = '';\n  &#125;\n&#125;);\nçº¯å±•ç¤ºæ€§çš„éœ€æ±‚ï¼Œå¯ä»¥ä»…ç”±HTMLå’ŒCSSå®ç°ã€‚\n#modeCheckbox:checked+.content &#123;\n   background-color: black;\n   color: white;\n   transition: all 1s;\n&#125;\n\næ€»ç»“\nHTML/CSS/JSå„å¸å…¶èŒ\n\né¿å…JSç›´æ¥æ“ä½œæ ·å¼\n\nclassè¡¨ç¤ºçŠ¶æ€ï¼ŒJSæ§åˆ¶çŠ¶æ€\n\nçº¯å±•ç¤ºç±»äº¤äº’éœ€æ±‚é›¶JSæ–¹æ¡ˆ\n\n\nç»„ä»¶å°è£…ç”µå•†è½®æ’­å›¾åŸç”ŸJSå†™ä¸€ä¸ªè½®æ’­å›¾ï¼Œå…·å¤‡ç»„ä»¶çš„å°è£…æ€§ã€æ­£ç¡®æ€§ã€æ‰©å±•æ€§ã€å¤ç”¨æ€§ã€‚\næ–¹æ³•ï¼šæŠ½ç¦»ç»„ä»¶ï¼Œç»„ä»¶æ˜¯æŒ‡webé¡µé¢ä¸ŠåŒ…å«æ¨¡æ¿ã€æ ·å¼å’ŒåŠŸèƒ½çš„å•å…ƒï¼Œå¥½çš„ç»„ä»¶å…·å¤‡å°è£…æ€§ã€æ­£ç¡®æ€§ã€æ‰©å±•æ€§ã€å¤ç”¨æ€§\nç»“æ„è®¾è®¡ï¼šHTMLæ€è€ƒç»„ä»¶æ‰€éœ€è¦çš„DOMç»“æ„ï¼Œè½®æ’­å›¾çš„ä¸»ä½“æ˜¯ä¸€ä¸ªå…¸å‹çš„åˆ—è¡¨ç»“æ„ï¼Œå¯ä»¥ä½¿ç”¨&lt;ul&gt;æ ‡ç­¾å®ç°ï¼›æ§åˆ¶è½®æ’­åˆ‡æ¢éœ€è¦ä¸¤ä¸ªæŒ‰é’®ï¼Œç®€å•çš„&lt;div&gt;å³å¯ï¼Œè½®æ’­åº•éƒ¨å¾€å¾€è¿˜ä¼šæœ‰è½®æ’­å†…å®¹å¯¹åº”çš„æ§åˆ¶ç‚¹ï¼ŒåŒæ ·ä½¿ç”¨&lt;ul&gt;ã€‚\n&lt;div class=\"slider\">\n  &lt;ul>\n    &lt;li class=\"slider__item--selected\">\n      &lt;img src=\"https://p5.ssl.qhimg.com/t0119c74624763dd070.png\"/>\n    &lt;/li>\n    &lt;li class=\"slider__item\">\n      &lt;img src=\"https://p4.ssl.qhimg.com/t01adbe3351db853eb3.jpg\"/>\n    &lt;/li>\n    &lt;li class=\"slider__item\">\n      &lt;img src=\"https://p2.ssl.qhimg.com/t01645cd5ba0c3b60cb.jpg\"/>\n    &lt;/li>\n    &lt;li class=\"slider__item\">\n      &lt;img src=\"https://p4.ssl.qhimg.com/t01331ac159b58f5478.jpg\"/>\n    &lt;/li>\n  &lt;/ul>\n  &lt;div class=\"slider__next\">&lt;/div>\n  &lt;div class=\"slider__previous\">&lt;/div>\n  &lt;ul class=\"slider__control\">\n    &lt;li class=\"slider__control-buttons--selected\">&lt;/li>\n    &lt;li class=\"slider__control-buttons\">&lt;/li>\n    &lt;li class=\"slider__control-buttons\">&lt;/li>\n    &lt;li class=\"slider__control-buttons\">&lt;/li>\n  &lt;/ul>\n&lt;/div>\n\nå±•ç¤ºè®¾è®¡ï¼šCSSä½¿ç”¨CSS position ç»å¯¹å®šä¹‰å°†åˆ—è¡¨é¡¹é‡å åœ¨åŒä¸€ä¸ªä½ç½®ï¼Œè½®æ’­å›¾åˆ‡æ¢çš„çŠ¶æ€ä½¿ç”¨ä¿®é¥°ç¬¦ï¼ˆmodifierï¼‰ï¼Œåˆ‡æ¢çš„åŠ¨ç”»ä½¿ç”¨CSS transitionã€‚\n.slider &#123;\n  position: relative;\n  width: 790px;\n  height: 340px;\n&#125;\n\n.slider ul &#123;\n  list-style-type:none;\n  position: relative;\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  margin: 0;\n&#125;\n\n.slider__item,\n.slider__item--selected &#123;\n  position: absolute;\n  transition: opacity 1s;\n  opacity: 0;\n  text-align: center;\n&#125;\n\n.slider__item--selected &#123;\n  transition: opacity 1s;\n  opacity: 1;\n&#125;\n....\n\nè¡Œä¸ºè®¾è®¡ï¼šAPIAPIè®¾è®¡åº”ä¿è¯åŸå­æ“ä½œï¼ŒèŒè´£å•ä¸€ï¼Œæ»¡è¶³çµæ´»æ€§ã€‚ \nå…ˆå›é¡¾ä¸‹è½®æ’­ç»„ä»¶çš„éœ€æ±‚ï¼š\n\nå›¾ç‰‡å¾ªç¯æ’­æ”¾ï¼Œæ¯å¼ å›¾ç‰‡åœç•™è‹¥å¹²æ—¶é—´\nå›¾ç‰‡èƒ½å¤Ÿåˆ‡æ¢åˆ°ä¸Šä¸€å¼ /ä¸‹ä¸€å¼ \nå°åœ†ç‚¹èƒ½å¤Ÿè·³è½¬æ˜¾ç¤ºå°åœ†ç‚¹é¡ºåºå¯¹åº”çš„å›¾ç‰‡\n\næ ¹æ®ä¸Šè¿°éœ€æ±‚ï¼Œè®¾è®¡å‡ºä»¥ä¸‹5ä¸ªç»„ä»¶APIï¼ˆè¯¦ç»†å®ç°è§æ–‡æœ«å¼•ç”¨ï¼‰ï¼š\n\nç„¶åï¼Œå°†è¿™ä¸ªç»„ä»¶å°è£…ä¸ºä¸€ä¸ªç±»â€”â€”Sliderã€‚\nåœ¨å†™å¥½ç»“æ„å’Œæ ·å¼ä¹‹åï¼Œé€šè¿‡newå…³é”®å­—è°ƒç”¨ï¼Œå¹¶ä½¿ç”¨setIntervalå®ç°å¾ªç¯æ’­æ”¾ï¼š\nconst container = document.querySelector('.slider');\nconst slider = new Slider(&#123;container&#125;);\nsetInterval(() => &#123;\n  slider.slideNext();\n&#125;, 3000);\n\nè¡Œä¸ºè®¾è®¡ï¼šæ§åˆ¶æµå®ç°äº†ç»„ä»¶çš„APIåï¼Œè¿˜éœ€è¦å®ç°ç”¨æˆ·çš„æ§åˆ¶åŠŸèƒ½\n\nå½“ç”¨æˆ·ç‚¹å‡»å·¦å³ä¸¤è¾¹çš„å°ç®­å¤´æ—¶ï¼Œå›¾ç‰‡åˆ†åˆ«åˆ‡æ¢åˆ°ä¸Šä¸€å¼ /ä¸‹ä¸€å¼ ï¼Œå¹¶ç‚¹äº®ä¸è¯¥å›¾ç‰‡ç›¸å¯¹åº”çš„å°åœ†ç‚¹\nå½“ç”¨æˆ·é¼ æ ‡ç§»è¿›åˆ°åº•éƒ¨å°åœ†ç‚¹æ—¶ï¼Œåˆ™ç«‹å³è·³åˆ°å°åœ†ç‚¹é¡ºåºæ‰€å¯¹åº”çš„é‚£å¼ å›¾ç‰‡ï¼Œåœæ­¢è½®æ’­\nå½“ç”¨æˆ·é¼ æ ‡ç§»å‡ºåº•éƒ¨å°åœ†ç‚¹åï¼Œå›¾ç‰‡å†æ¬¡æ¢å¤è½®æ’­\n\næ‰€è°“æ§åˆ¶æµå°±æ˜¯ç»™æ¯ä¸ªç»„ä»¶çš„éƒ¨ä»¶æ·»åŠ ä¸Šå¯¹åº”ç”¨æˆ·è¡Œä¸ºçš„äº‹ä»¶ç›‘å¬å™¨ï¼Œå¹¶åœ¨åˆé€‚çš„APIæ–¹æ³•ä½“å†…ç§»é™¤è¿™äº›äº‹ä»¶ç›‘å¬å™¨ã€‚\nåœ¨è¿™ä¸ªç»„ä»¶ä¸­ï¼Œæ¶‰åŠåˆ°çš„æœ‰clickã€mouseoverã€mouseoutäº‹ä»¶ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡è‡ªå®šä¹‰äº‹ä»¶ï¼Œå¯¹æ§åˆ¶æµè¿›è¡Œè§£è€¦\nslideTo() &#123;\n  ......\n  new CustomEvent('slide', &#123;bubbles: true, details &#125;); // slideNext()å‡½æ•°ä½“ä¸­æ´¾å‘è‡ªå®šä¹‰äº‹ä»¶ï¼Œæ§åˆ¶è½®æ’­å›¾å°ç‚¹\n&#125;\n\n\n......\n\naddEventListener('slide', (evt) => &#123;&#125;)\n\nè¿™ä¸ªè‡ªå®šä¹‰äº‹ä»¶ï¼ˆCustomEventï¼‰ï¼Œä½œç”¨æ˜¯è®©åº•éƒ¨å°åœ†ç‚¹æ§ä»¶ç›‘å¬slideToæ–¹æ³•ã€‚å½“slideToæ–¹æ³•æ‰§è¡Œåï¼Œè¿™ä¸ªæ–¹æ³•å°±ä¼šåˆ†å‘ä¸€æ¬¡slideäº‹ä»¶ï¼Œç„¶ååœ¨è¿™ä¸ªäº‹ä»¶ä¸­ï¼Œæ›´æ–°åº•éƒ¨å°åœ†ç‚¹çš„çŠ¶æ€ï¼Œè®©å°åœ†ç‚¹çš„çŠ¶æ€å’Œå„è‡ªçš„å›¾ç‰‡çŠ¶æ€å¯¹åº”èµ·æ¥ã€‚\næ€è€ƒï¼šæ”¹è¿›ç©ºé—´å›é¡¾ä¸€ä¸‹ä¸Šé¢çš„å‡ ä¸ªæ­¥éª¤ï¼š\n\nè®¾è®¡HTMLç»“æ„\nç¼–å†™CSSæ ·å¼\nè®¾è®¡ç»„ä»¶APIï¼Œå¯¹APIè¿›è¡Œä¿®æ”¹ï¼Œä»¥æ·»åŠ æ§åˆ¶æµç¨‹\n\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¿™ä¸ªç»„ä»¶å·²ç»å·²ç»æ»¡è¶³äº†å°è£…æ€§ã€æ­£ç¡®æ€§ï¼Œå¯ä»¥æŠ•å…¥åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ã€‚ä½†è¿™ä¸ªç»„ä»¶åªèƒ½æ»¡è¶³è‡ªèº«çš„ä½¿ç”¨ï¼Œå¾ˆéš¾åº”å¯¹å˜åŒ–çš„éœ€æ±‚ï¼Œæ¯”å¦‚ï¼Œå¦‚æœæˆ‘ä»¬ä¸éœ€è¦ä¸‹æ–¹çš„æ§åˆ¶åœ†ç‚¹ï¼Œè¿˜æ˜¯è¦è¿›å…¥åˆ°sliderç±»ä¸­ï¼Œæ³¨é‡Šæ‰ä¸€äº›ä»£ç ï¼›å¦‚æœæˆ‘ä»¬ä»…éœ€è¦ä¸€ä¸ªä¸€æ’æ§åˆ¶ç‚¹ï¼Œæ§åˆ¶ä¸€ä¸ªåˆ—è¡¨çš„æ˜¾ç¤ºï¼Œæˆ‘ä»¬è¿˜è¦å¦å¤–ç¼–å†™å…¶ä»–ç»„ä»¶ã€‚\nä¹Ÿå°±æ˜¯è¯´ï¼Œè¿˜å¯ä»¥å¯¹åŸæœ¬çš„ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œæ»¡è¶³ä¸€ä¸ªå¥½çš„ç»„ä»·éœ€è¦çš„æ‰©å±•æ€§ã€å¤ç”¨æ€§ã€‚\né‡æ„ï¼šæ’ä»¶åŒ–\nå°†æ§åˆ¶å…ƒç´ æŠ½å–æˆæ’ä»¶\næ’ä»¶ä¸ç»„ä»¶ä¹‹é—´é€šè¿‡ä¾èµ–æ³¨å…¥æ–¹å¼å»ºç«‹è”ç³»\n\né‡æ„ï¼šæ¨¡æ¿åŒ–\nå°†htmlå’Œcssæ¨¡æ¿åŒ–ï¼Œæ›´æ˜“äºæ‰©å±•\n\n\n\n\n\né‡æ„ï¼šç»„ä»¶æ¡†æ¶\nå°†é€šç”¨çš„ç»„ä»¶æ¨¡å‹æŠ½è±¡å‡ºæ¥ï¼Œè‡ªå®šä¹‰ç»„ä»¶å»å®ç°Componentçš„æŠ½è±¡æ–¹æ³•\n\n\n\n\næ€»ç»“\nç»„ä»¶è®¾è®¡çš„åŸåˆ™ï¼š\nå°è£…æ€§ã€æ­£ç¡®æ€§ã€æ‰©å±•æ€§ã€å¤ç”¨æ€§\n\nå®ç°ç»„ä»¶çš„æ­¥éª¤ï¼š\n\nç»“æ„è®¾è®¡\n\nå±•ç¤ºæ•ˆæœ\n\nè¡Œä¸ºè®¾è®¡\n\nAPIï¼ˆåŠŸèƒ½ï¼‰\n\nEventï¼ˆæ§åˆ¶æµï¼‰\n\n\n\n\n\nä¸‰æ¬¡é‡æ„\n\næ’ä»¶åŒ–\næ¨¡æ¿åŒ–\næŠ½è±¡åŒ–ï¼ˆç»„ä»¶æ¡†æ¶ï¼‰\n\n\n\nè¿‡ç¨‹æŠ½è±¡\nå°†è¿‡ç¨‹å’Œæ¶‰åŠåˆ°çš„çŠ¶æ€å°è£…åˆ°ä¸€ä¸ªæ–¹æ³•ä¸­å›½ï¼Œè®©æ–¹æ³•çš„è°ƒç”¨è€…åªå…³æ³¨è¾“å…¥å’Œè¾“å‡ºæœ¬èº«ã€‚\né«˜é˜¶å‡½æ•°\nä»¥å‡½æ•°ä½œä¸ºå‚æ•°\nä»¥å‡½æ•°ä½œä¸ºè¿”å›å€¼\nç»å¸¸ç”¨äºå‡½æ•°è£…é¥°å™¨\n\nå¸¸è§çš„é«˜é˜¶å‡½æ•°æœ‰ï¼š\n\nonce\nfunction once(fn) &#123;\n\treturn function(..args) &#123;\n\t\tif(fn) &#123;\n      const result = fn.apply(this, args);\n      fn = null;\n      return result;\n    &#125;\n\t&#125;\n&#125;\ndebounce\nfunction debounce(fn, dur = 1000) &#123;\n\tlet timer;\n\treturn function() &#123;\n\t\tclearTimeout(timer);\n\t\ttimer = setTimeout(() => &#123;\n      fn.apply(this, arguments);\n    &#125;, dur) \n\t&#125;\n&#125;\nthrottle\nfunction throttle(fn, time = 1000) &#123;\n  let timer;\n  return function(...args) &#123;\n    if(timer === null) &#123;\n      fn.apply(this, args);\n      timer = setTimeout(() => &#123;\n        timer = null;\n      &#125;, time)\n    &#125;\n  &#125;\n&#125;\nconsumer\n\niterative\n\n\nä¸ºä»€ä¹ˆè¦ä½¿ç”¨é«˜é˜¶å‡½æ•°ï¼Ÿæ˜“äºå‡å°‘éçº¯å‡½æ•°ï¼Œé€šè¿‡æµ‹è¯•é«˜é˜¶å‡½æ•°ï¼Œé—´æ¥åœ°æµ‹è¯•è¢«é«˜é˜¶å‡½æ•°åŒ…è£¹çš„éçº¯å‡½æ•°ã€‚æ¯”å¦‚ï¼Œæœ‰ä¸€ä¸ªæ“ä½œdomçš„éçº¯å‡½æ•°ï¼Œè¿˜æœ‰ä¸€ä¸ªæ‰¹é‡æ“ä½œçš„interativeé«˜é˜¶å‡½æ•°ï¼Œå°±å¯ä»¥é€šè¿‡iterativeæ‰¹é‡æ“ä½œdom\nç¼–ç¨‹èŒƒå¼çº¯å‡½æ•° &amp; éçº¯å‡½æ•°å‘½ä»¤å¼ &amp; å£°æ˜å¼æ€»ç»“ï¼š\nè¿‡ç¨‹æŠ½è±¡/HOF/è£…é¥°å™¨\nå‘½ä»¤å¼/å£°æ˜å¼ï¼ˆtoggleå‡½æ•°ï¼‰\n\nå¦‚ä½•å†™å¥½JavaScriptä»£ç å†™ä»£ç åº”è¯¥å…³æ³¨\næ•ˆç‡\né£æ ¼\nä½¿ç”¨åœºæ™¯\nçº¦å®š\nè®¾è®¡\n\nå…·ä½“çš„ä»£ç å®ç°è¦å› åœºæ™¯è€Œå®šï¼Œä¸åŒçš„åœºæ™¯æ³¨é‡ç‚¹ä¸ä¸€æ ·ï¼Œä¾‹å¦‚åœ¨æŸäº›æ¯”è¾ƒåº•å±‚çš„åœºæ™¯ï¼Œå¯èƒ½æ›´æ³¨é‡æ•ˆç‡ï¼Œè€Œåœ¨å¤šäººåä½œçš„æ—¶å€™å¯èƒ½æ›´å…³æ³¨çº¦å®šã€‚\nleft-padäº‹ä»¶\nString.repeat()æ–¹æ³• ï¼ˆO(n)ï¼‰\næŒ‰ä½ä¸é™ä½ç®—æ³•å¤æ‚åº¦ï¼ˆO(n) -&gt; O(logn)ï¼‰(mdnä¸Šçš„polyfillå®ç°)\n\nä»£ç ç¼–å†™è¦æ ¹æ®åœºæ™¯ï¼Œä¸è¦å¯¹è¿‡åº¦çš„ä¼˜åŒ–è®¾è®¡\näº¤é€šç¯\nå›è°ƒåœ°ç‹±\nconst traffic = document.getElementById('traffic');\n\n(function reset() &#123;\n  traffic.className = 's1';\n  \n  setTimeout(() => &#123;\n    traffic.className = 's2';\n    setTimeout(() => &#123;\n      traffic.className = 's3';\n      setTimeout(reset, 1000)\n    &#125;, 1000)\n  &#125;, 1000)\n&#125;)();\nçŠ¶æ€æœºæ€æƒ³\nconst traffic = document.getElementById('traffic');\n\nfunction poll(...fnList) &#123;\n  let stateIndex = 0;\n  \n  return funtion(...args) &#123;\n    let fn = fnList[stateIndex++ % fnList.length];\n    \n    return fn.apply(this, args);\n  &#125;\n&#125;\n\nfunction setState(state) &#123;\n  traffic.className = state;\n&#125;\n\nlet trafficStatePoll = poll(\n\tsetState.bind(nullm 'wait');\n  setState.bind(nullm 'stop');\n\tsetState.bind(nullm 'pass');\n)\n\nsetInterval(trafficStatePoll, 2000);\nasyncã€awaitå¸¸è§„åšæ³•\nconst traffic = document.getElementById('traffic'); \nfunction wait(time)&#123; \n    return new Promise(resolve => setTimeout(resolve,time)) \n&#125; \n\nfunction setState(state)&#123; \n    traffic.className = state;\n&#125; \n\nasync function start()&#123; \n    while(1)&#123; \n        setState('wait'); \n        await wait(1000); \n        setState('stop'); \n        await wait(3000); \n        setState('pass'); \n        await wait(3000);\n    &#125; \n&#125; \n\nstart();\n\nåˆ¤æ–­æ˜¯å¦æ˜¯4çš„å¹‚\nå¸¸è§„æ“ä½œ\nconst isPowerOfFour = (num) => &#123; \n    num = parseInt(num); \n    while(num > 1)&#123; \n        if(num % 4) return false; \n        num /= 4; \n    &#125; \n    return trueï¼›\n&#125;\næŒ‰ä½ä¸\nconst isPowerOfFour = (num) => &#123;\n    num = parseInt(num);\n    return num > 0 &amp;&amp;\n           (num &amp; (num-1)) === 0 &amp;&amp;\n           (num &amp; 0XAAAAAAAA) === 0;\n&#125;\næ­£åˆ™\nconst isPowerOfFour = (num) => &#123;\n    num = parseInt(num).toString(2);\n    return /^1(?:00)*$/.test(num);\n&#125;\n\næ´—ç‰Œ\né”™è¯¯ç¤ºä¾‹\n\nçœ‹ä¼¼å¯ä»¥æ­£ç¡®æ´—ç‰Œï¼Œä½†å®é™…ä¸Šè¾ƒå°çš„ç‰Œæ”¾åˆ°å‰é¢çš„æ¦‚ç‡æ›´å¤§ï¼Œè¾ƒå¤§çš„çš„ç‰Œæ”¾åˆ°åé¢çš„æ¦‚ç‡æ›´å¤§\nconst cards = [0,1,2,3,4,5,6,7,8,9];\nconst shuffle = (cards) => &#123;\n    return [...cards].sort(() => &#123; Math.random() > 0.5 ? -1 : 1 &#125;);\n&#125;\n\n\næ­£ç¡®ç¤ºä¾‹\n\nconst cards = [0,1,2,3,4,5,6,7,8,9]; \nfunction *draw(cards)&#123; \n    const c = [...cards]; \n    for(let i = c.length ; i > 0 ; i--)&#123; \n        const pIdx = Math.floor(Math.random() * i);\n        [c[pIdx],c[i - 1]] = [c[i - 1],c[pIdx]]; \n        yield c[i - 1];\n    &#125; \n    return c; \n&#125;\n\nåˆ†çº¢åŒ…\nç±»ä¼¼äºåˆ‡è›‹ç³•ï¼Œå–æœ€å¤§çš„ç»§ç»­åˆ‡åˆ†ï¼Œå¾—å‡ºçš„ç»“æœä¼šæ¯”è¾ƒå¹³å‡\n\nfunction generate(amount,count)&#123; \n    let ret = [amount]; \n    while(count > 1)&#123; \n        // æŒ‘å‡ºæœ€å¤§çš„è¿›è¡Œåˆ‡åˆ† \n        let cake = Math.max(...ret), \n        idx = ret.indexOf(cake), \n              part = 1 + Math.floor((cake / 2) * Math.random()), \n              rest = cake - part; \n        ret.splice(idx,1,part,rest); \n        count --; \n    &#125; \n    return ret; \n&#125;\n\n\néšæœºæ€§è¾ƒå¤§ï¼Œå¯èƒ½ä¼šæœ‰è¾ƒå¤§çš„çº¢åŒ…å‡ºç°\n\nfunction *draw(cards)&#123; \n    const c = [...cards]; \n    for(let i = c.length ; i > 0 ; i --)&#123; \n        const pIdx = Math.floor(Math.random()*i); \n        [c[pIdx],c[i-1]] = [c[i - 1],c[pIdx]]; \n        yield c[i-1] \n    &#125; \n    return c;\n&#125; \n\nfunction generate(amount,count)&#123; \n    if(count &lt;= 1) return [amount]; \n    const cards = Array(amount - 1).fill(null).map((_,i) => i+1); \n    const pick = draw(cards); \n    const result = []; \n    for(let i = 0 ; i &lt; count; i++)&#123; \n        result.push(pick.next().value);\n    &#125; \n    result.sort((a,b)=>a-b); \n    for(let i = count - 1 ; i > 0 ; i--)&#123; \n        result[i] = result[i] - result[i - 1];\n    &#125; \n    return result; \n&#125;\n\n\n\n\n\n\n\n\n\n\n\n\næ–‡ç« ä¸­çš„å¤§éƒ¨åˆ†çŸ¥è¯†ç‚¹æ¥è‡ª Byte Dance é’è®­è¥ç¤¾åŒºï¼Œä¸‹é¢æ˜¯ä¸»è¦çš„å¼•ç”¨\nhttps://forum.juejin.cn/youthcamp/post/7052254063840198686\nhttps://forum.juejin.cn/youthcamp/post/7054115780656381959?from=1\n","slug":"å¦‚ä½•å†™å¥½JavaScriptä»£ç ","date":"2022-01-19T15:20:00.000Z","categories_index":"","tags_index":"","author_index":"EVE"},{"id":"4fa07bcbd0aa3f4d5eb9b3a018e120bd","title":"å‰ç«¯å¼€å‘è°ƒè¯•æŠ€å·§","content":"å‰ç«¯å¼€å‘è°ƒè¯•æŠ€å·§å‰ç«¯Debugçš„ç‰¹ç‚¹å¤šå¹³å°\næµè§ˆå™¨\nHybrid\nNodeJs\nå°ç¨‹åº\næ¡Œé¢GUI\nâ€¦â€¦\n\nå¤šç¯å¢ƒ\næœ¬åœ°å¼€å‘ç¯å¢ƒ\n\nçº¿ä¸Šç”Ÿäº§ç¯å¢ƒ\n\nâ€¦â€¦.\n\nå¤šå·¥å…·\nChrome Devtools\n\nCharles\n\nSpy-Debugger \n\nspy-debugger + charles ç§»åŠ¨ç«¯è°ƒè¯•\n\n\nWhistle\n\nvConsole\n\nâ€¦â€¦\n\n\nå¤šæŠ€å·§\nConsole\nBreakPoint\nSourceMap\nä»£ç†\nâ€¦â€¦\n\næ¡Œé¢ç«¯ç¯å¢ƒ Chrome Devtoolsä¸€èˆ¬çš„æ¡Œé¢ç«¯åº”ç”¨ï¼Œæˆ–è€…å¼€å‘ç¯å¢ƒä¸‹ï¼Œæœ€å¸¸ç”¨çš„å½“ç„¶æ˜¯Chrome Devtoolsï¼Œæµè§ˆå™¨F12æˆ–å³å‡»å®¡æŸ¥å…ƒç´ å³å¯æ‰“å¼€é¢æ¿ã€‚\n\nElementsé¢æ¿elementä¸»è¦ç”¨æ¥åŠ¨æ€åœ°ä¿®æ”¹å…ƒç´ å’Œæ ·å¼ï¼Œä¹Ÿèƒ½æŸ¥çœ‹äº‹ä»¶ç›‘å¬å™¨åœ¨ä»£ç ä¸­çš„ä½ç½®ã€‚\n\nç‚¹å‡»**.clså¼€å¯åŠ¨æ€ä¿®æ”¹å…ƒç´ çš„class**\nç‚¹å‡»**:hov**æŸ¥çœ‹ä¼ªç±»æ¿€æ´»çš„æ•ˆæœ\nComputedä¸‹ç‚¹å‡»æ ·å¼é‡Œçš„ç®­å¤´å¯ä»¥è·³è½¬åˆ°Stylesé¢æ¿ä¸­çš„cssè§„åˆ™\nLayoutå¯ä»¥æ‚¬åœflexå’Œgridå¸ƒå±€çš„å®¹å™¨\nEvent ListenersæŸ¥çœ‹DOMäº‹ä»¶ç›‘å¬å™¨åœ¨ä»£ç ä¸­çš„ä½ç½®ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œç§»é™¤\nPropertiesç½—åˆ—å‡ºDOMä¸Šçš„æ‰€æœ‰å±æ€§\nDOM Breakpointså¿«é€Ÿæ‰¾åˆ°ä¿®æ”¹äº†æŸä¸€ä¸ªDOMå…ƒç´ çš„Javascriptä»£ç \nAccessibiliyè·ŸWebæ— éšœç¢ç›¸å…³ï¼Œå¦‚aria-labelå±æ€§\n\nConsoleé¢æ¿\nconsole.log\n\nconsole.warn\n\nconsole.error\n\nconsole.debug\n\nconsole.info\né¢æ¿å¯ä»¥é€‰æ‹©ç­‰çº§ï¼Œå¯¹æ—¥å¿—è¿›è¡Œåˆ†ç±»ï¼š\n\n\nconsole.table\nå…·è±¡åŒ–åœ°å±•ç¤ºJSONå’Œæ•°ç»„æ•°æ®\n\n\nå ä½ç¬¦\nç»™æ—¥å¿—æ·»åŠ æ ·å¼ï¼Œçªå‡ºé‡è¦çš„ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡backgroundæ’å…¥å›¾ç‰‡\n\n%sï¼šå­—ç¬¦ä¸²å ä½ç¬¦\n%oï¼šå¯¹è±¡å ä½ç¬¦\n%cï¼šæ ·å¼å ä½ç¬¦\n%dï¼šæ•°å­—å ä½ç¬¦\n\n\n\n\nSourcesé¢æ¿sourcesé¢æ¿åŒ…å«ç€é¡¹ç›®çš„å®Œæ•´ä»£ç ï¼Œæä¾›äº†å¾ˆå¤šæ–­ç‚¹è°ƒè¯•å·¥å…·ã€‚\n\nä»å·¦åˆ°å³çš„åŒºåŸŸåˆ†åˆ«æ˜¯ï¼š\n\né¡µé¢èµ„æºæ–‡ä»¶ç›®å½•\nä»£ç é¢„è§ˆåŒºåŸŸ\nDebugå·¥å…·æ \næ–­ç‚¹è°ƒè¯•å™¨\n\nBreakpointå’ŒWatchï¼š\nä½¿ç”¨å…³é”®å­—debuggeræˆ–ä»£ç é¢„è§ˆåŒºåŸŸçš„è¡Œå·è®¾ç½®æ–­ç‚¹\næ‰§è¡Œåˆ°æ–­ç‚¹å¤„ä»£ç æš‚åœæ‰§è¡Œ\nå±•å¼€Breakpointså¯ä»¥çœ‹åˆ°æ–­ç‚¹åˆ—è¡¨\næš‚åœçŠ¶æ€ä¸‹ï¼Œé¼ æ ‡hoverå˜é‡æŸ¥çœ‹å€¼\nåœ¨è°ƒè¯•å™¨Watchå³ä¾§ç‚¹å‡» **+**å¯ä»¥æ·»åŠ å¯¹å˜é‡çš„ç›‘æ§ \n\nScopeå’ŒCall Stackï¼š\nå±•å¼€ScopeæŸ¥çœ‹ä½œç”¨åŸŸåˆ—è¡¨ï¼ˆåŒ…å«é—­åŒ…ï¼‰\nå±•å¼€Call Stackå¯ä»¥æŸ¥çœ‹å½“å‰JavaScriptä»£ç çš„è°ƒç”¨æ ˆ\n\nå¦‚ä½•è°ƒè¯•å‹ç¼©åçš„ä»£ç  â€”â€” SourceMapå‰ç«¯ä»£ç å¤©ç”Ÿå…·æœ‰â€œå¼€æºâ€å±æ€§ï¼Œå¦‚æœä¸ç»è¿‡ä¸€å®šçš„å¤„ç†ï¼ˆå‹ç¼©å’Œå˜é‡åæ›¿æ¢ï¼‰ï¼Œåˆ™ä¼šæœ‰å®‰å…¨éšæ‚£ã€‚é€šå¸¸ä¼šä½¿ç”¨Webpackä¹‹ç±»çš„å·¥å…·å¯¹é¡¹ç›®çš„æºç è¿›è¡Œç¼–è¯‘æ‰“åŒ…ï¼Œå˜æˆç±»ä¼¼ä»¥ä¸‹çš„ä»£ç ã€‚\n\nä¸Šé¢çš„ä»£ç ä¸å¯é˜…è¯»ï¼Œä¹Ÿå¾ˆéš¾è¿›è¡Œè°ƒè¯•ã€‚Source Mapèƒ½è§£å†³è¿™äº›é—®é¢˜ï¼Œå…³äºå®ƒå¯ä»¥å†™å¤šå¦å¤–ä¸€ç¯‡æ–‡ç« è¿›è¡Œä»‹ç»ï¼Œè¿™é‡Œå…ˆç®€å•è´´å‡ºå‡ ç¯‡è®²è§£sourcemapçš„æ–‡ç« ï¼Œåç»­æˆ‘ä¹Ÿä¼šè¿›è¡Œè¯¦å°½åœ°å­¦ä¹ ï¼Œæ•´ç†æˆç¬”è®°ã€‚\n\n\n\n\n\n\n\n\n\n\nhttps://juejin.cn/post/6963076475020902436#comment\n\nhttps://juejin.cn/post/6969748500938489892#comment\n\nhttps://cloud.tencent.com/developer/article/1845590\n\n\næœ‰äº†Source Mapï¼Œå°±èƒ½åœ¨å¼€å‘ç¯å¢ƒä¸‹è¿›è¡Œè°ƒè¯•äº†ã€‚å½“ç„¶ï¼Œçº¿ä¸Šç¯å¢ƒè¿˜æ˜¯ä¸å»ºè®®å¼€å¯ï¼Œè€Œæ˜¯æ¥å…¥ç›‘æ§ç³»ç»Ÿï¼Œå¦‚Sentryï¼Œå°†buildä¹‹åçš„sourcemapæ–‡ä»¶éƒ¨ç½²åˆ°å†…ç½‘çš„ç›‘æ§ç³»ç»Ÿä¸Šã€‚\n\nPerformanceé¢æ¿\nä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ˜¯ï¼š\næ§åˆ¶é¢æ¿æ¦‚è§ˆé¢æ¿\nFPSï¼šæ¯ç§’å¸§æ•°\nCPUï¼šå¤„ç†å„ä¸ªä»»åŠ¡èŠ±è´¹çš„æ—¶é—´\nNETï¼šå„ä¸ªè¯·æ±‚èŠ±è´¹çš„æ—¶é—´\n\nçº¿ç¨‹é¢æ¿\nFramesï¼šå¸§çº¿ç¨‹\nMainï¼šä¸»çº¿ç¨‹ï¼Œè´Ÿè´£æ‰§è¡ŒJavaScriptï¼Œè§£æHTML/CSSï¼Œå®Œæˆç»˜åˆ¶\nRasterï¼šRasterçº¿ç¨‹ï¼Œè´Ÿè´£å®ŒæˆæŸä¸ªlayeræˆ–è€…æŸäº›å—ï¼ˆtileï¼‰çš„ç»˜åˆ¶\n\nç»Ÿè®¡é¢æ¿Networksé¢æ¿å±•ç¤ºä¸ç½‘ç»œè¯·æ±‚ç›¸å…³çš„ä¿¡æ¯ï¼Œå¸¸ç”¨äºåç«¯æ¥å£è°ƒè¯•ï¼Œä»¥åŠé™æ€èµ„æºä¼˜åŒ–ç­‰ã€‚\n\nä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ˜¯ï¼š\næ§åˆ¶é¢æ¿è¿‡æ»¤é¢æ¿æ¦‚è§ˆé¢æ¿Request Table é¢æ¿æ€»ç»“é¢æ¿è¯·æ±‚è¯¦æƒ…é¢æ¿Applicationé¢æ¿èƒ½çœ‹åˆ°æœ¬åœ°å­˜å‚¨ç›¸å…³çš„ä¿¡æ¯ã€‚\n\nLocal StorageSession StorageIndexedDBWeb SQLCookie\n\n\n\nç§»åŠ¨ç«¯H5ç¯å¢ƒçœŸæœºè°ƒè¯•IOSï¼š\nä½¿ç”¨æ•°æ®çº¿å°†iPhoneä¸Macç›¸è¿\niPhoneå¼€å¯Webæ£€æŸ¥å™¨ï¼ˆè®¾ç½® =&gt; Safari =&gt; é«˜çº§ =&gt; å¼€å¯Webæ£€æŸ¥å™¨ï¼‰\niPhoneæ‰“å¼€è¦è°ƒè¯•çš„é¡µé¢\nMacæ‰“å¼€Safariè°ƒè¯•ï¼ˆèœå•æ  =&gt; å¼€å‘ =&gt; iPhoneè®¾å¤‡å =&gt; é€‰æ‹©è°ƒè¯•é¡µé¢ï¼‰\nåœ¨å¼¹å‡ºçš„Safari Developer Toolsä¸­è°ƒè¯•\n\n\n\nAndroidï¼š\nä½¿ç”¨æ•°æ®çº¿å°†æ‰‹æœºä¸ç”µè„‘ç›¸è¿\næ‰‹æœºè¿›å…¥å¼€å‘è€…æ¨¡å¼ï¼Œå‹¾é€‰USBè°ƒè¯•ï¼Œå¹¶å…è®¸è°ƒè¯•\nç”µè„‘æ‰“å¼€Chromeï¼Œåœ¨åœ°å€æ è¾“å…¥ï¼šchrome://inspect/#deviceså¹¶å‹¾é€‰Discover USB devicesé€‰é¡¹\næ‰‹æœºå…è®¸è¿œç¨‹è°ƒè¯•ï¼Œå¹¶è®¿é—®è°ƒè¯•é¡µé¢\nç”µè„‘ç‚¹å‡»inspectæŒ‰é’®\nè¿›å…¥è°ƒè¯•é¡µé¢\n\nä»£ç†è°ƒè¯•åŸç†\nç”µè„‘ä½œä¸ºä»£ç†æœåŠ¡å™¨\næ‰‹æœºé€šè¿‡HTTPä»£ç†è¿æ¥åˆ°ç”µè„‘\næ‰‹æœºä¸Šçš„è¯·æ±‚éƒ½ç»è¿‡ä»£ç†æœåŠ¡å™¨\n\nä»¥Charlesä¸ºä¾‹ï¼š\nå®‰è£…Charles\næŸ¥çœ‹ç”µè„‘IPå’Œç«¯å£\nå°†IPã€ç«¯å£è¾“å…¥æ‰‹æœºHTTPä»£ç†\nCharleså…è®¸æˆæƒ\nä½¿ç”¨SwitchHostsè½¯ä»¶ç»™Macç”µè„‘é…Hosts\næ‰‹æœºè®¿é—®å¼€å‘ç¯å¢ƒç•Œé¢\n\n\n\nå¸¸ç”¨å·¥å…·\nCharlesï¼šé€‚åˆæŸ¥çœ‹ã€æ§åˆ¶ç½‘ç»œè¯·æ±‚ã€åˆ†ææ•°æ®\nFiddlerï¼šä¸Charlesç±»ä¼¼ï¼Œé€‚åˆwindowså¹³å°\nSpy-Debuggerï¼šè¿œç¨‹è°ƒè¯•æ‰‹æœºé¡µé¢ã€æŠ“åŒ…\nWhistleï¼šåŸºäºNodeå®ç°çš„è·¨å¹³å°Webè°ƒè¯•ä»£ç†å·¥å…·\n\nå¸¸ç”¨å¼€å‘è°ƒè¯•æŠ€å·§çº¿ä¸Šå³æ—¶ä¿®æ”¹Overridesåˆ©ç”¨ä»£ç†è§£å†³å¼€å‘é˜¶æ®µçš„è·¨åŸŸé—®é¢˜å¯ç”¨æœ¬åœ°Source Mapå°é»„é¸­è°ƒè¯•æ³•\n\n\n\n\n\n\n\n\n\næ€¥é€Ÿ debug å®æˆ˜äºŒï¼ˆæµè§ˆå™¨ - è°ƒè¯•çº¿ä¸Šç¯‡ï¼‰\n\n","slug":"å‰ç«¯å¼€å‘è°ƒè¯•æŠ€å·§","date":"2022-01-19T05:42:36.000Z","categories_index":"","tags_index":"","author_index":"EVE"},{"id":"efa091f902e958fe5c4762b87ffa7084","title":"winå‘macç¯å¢ƒè¿ç§»","content":"win åˆ‡æ¢åˆ° mac çš„ç¯å¢ƒè¿ç§»ä¹°ä¸èµ· macï¼Œåœ¨åŒå­¦çš„æ€‚æ¿ä¸‹è£…äº†é»‘ macï¼Œå‰å‰ååæŠ˜è…¾äº†ä¸¤ä¸‰å¤©ï¼Œæ€»ç®—ç¨³å®šä¸‹æ¥ï¼Œèƒ½å¼€å§‹å¹²æ´»äº†ã€‚ mac çš„å¼€å‘ä½“éªŒç¡®å®å¾ˆèˆ’æœï¼Œç±» linux çš„ shell å‘½ä»¤ï¼Œå„ç§å¥½ç”¨çš„å®‰è£…å·¥å…·ã€ç»ˆç«¯å·¥å…·ç­‰ç­‰ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯è®°å½•ä¸€ä¸‹ä» win è¿‡æ¸¡åˆ° mac è¿‡ç¨‹ä¸­ä¸€äº›å¿…è¦çš„è½¯ä»¶å®‰è£…è¿‡ç¨‹ï¼Œæ–¹ä¾¿ä¹‹åä¹°æ­£ç»Ÿ mac è½¬æ¢å¼€å‘ç¯å¢ƒï¼ˆä¸‡ä¸€å‘¢ï¼‰ã€‚\n\n\nç¯å¢ƒç±»git ç¯å¢ƒæ›´æ”¹é»˜è®¤ gitmac ä¸‹è‡ªå¸¦çš„gitç‰ˆæœ¬æ¯”è¾ƒä½ï¼Œä½¿ç”¨homebrewå®‰è£…å‡çº§\nå¦‚æœæ²¡æœ‰å®‰è£… homebrewï¼Œå°±å…ˆå»å®‰è£…ä¸‹homebrewçš„å›½å†…æºâ€”â€”https://gitee.com/cunkai/HomebrewCN\n/bin/zsh -c \"$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)\"\n\nå®‰è£… Git\nbrew install git\n\nçœ‹åˆ°ä¸‹é¢è¾“å‡ºæ—¶ï¼Œè¯´æ˜gitå·²ç»å®‰è£…å®Œæˆï¼š\n\nä¸‹é¢ä¸€æ­¥æ˜¯æ”¹å˜gitçš„é»˜è®¤æŒ‡å‘ï¼š\n// ç»ˆç«¯ä¸­æŸ¥çœ‹gitçš„æŒ‡å‘å’Œç‰ˆæœ¬ä¿¡æ¯\n$ which git\n/usr/bin/git\n$ git --version\ngit version 2.17.2 (Apple Git-113)\n\næ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡ brew link å°† git æŒ‡å‘æˆ‘ä»¬é€šè¿‡ Homebrew å®‰è£…çš„ git:\n$ brew link git --overwrite\nWarning: Already linked: /usr/local/Cellar/git/2.20.1\nTo relink: brew unlink git &amp;&amp; brew link git\n\n\u0003link æˆåŠŸåï¼Œé€€å‡ºç»ˆç«¯åï¼Œå†æ¬¡æ‰“å¼€ã€‚ç„¶åæŸ¥çœ‹ git æŒ‡å‘å’Œç‰ˆæœ¬ä¿¡æ¯ã€‚\n$ which git\n/usr/local/bin/git\n$ git --version\ngit version 2.33.0\n\ngit å…¨å±€é…ç½®æ£€æŸ¥å…¨å±€é…ç½®ï¼š\ngit config --list\n\nè®¾ç½®å…¨å±€ç”¨æˆ·ä¿¡æ¯ï¼š\ngit config --global user.name  \"starryeve\" // è¿™é‡Œæ˜¯å…¨å±€ä¿¡æ¯ï¼Œç»†åˆ†åˆ°å•ä¸ªé¡¹ç›®è¿˜å¯ä»¥å†å•ç‹¬è®¾ç½®\ngit config --global user.email \"starryeve.com\"\n\né…ç½® sshåœ¨ç®¡ç† Git é¡¹ç›®ä¸Šï¼Œå¾ˆå¤šæ—¶å€™éƒ½æ˜¯ç›´æ¥ä½¿ç”¨ https url å…‹éš†åˆ°æœ¬åœ°ï¼Œå½“ç„¶ä¹Ÿæœ‰æœ‰äº›äººä½¿ç”¨ SSH url å…‹éš†åˆ°æœ¬åœ°ã€‚\nè¿™ä¸¤ç§æ–¹å¼çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼š\n\nä½¿ç”¨https urlå…‹éš†å¯¹åˆå­¦è€…æ¥è¯´ä¼šæ¯”è¾ƒæ–¹ä¾¿ï¼Œå¤åˆ¶https urlç„¶ååˆ° git Bash é‡Œé¢ç›´æ¥ç”¨ clone å‘½ä»¤å…‹éš†åˆ°æœ¬åœ°å°±å¥½äº†ï¼Œä½†æ˜¯æ¯æ¬¡ fetch å’Œ push ä»£ç éƒ½éœ€è¦è¾“å…¥è´¦å·å’Œå¯†ç ï¼Œè¿™ä¹Ÿæ˜¯ https æ–¹å¼çš„éº»çƒ¦ä¹‹å¤„ã€‚\nè€Œä½¿ç”¨SSH urlå…‹éš†å´éœ€è¦åœ¨å…‹éš†ä¹‹å‰å…ˆé…ç½®å’Œæ·»åŠ å¥½SSH keyï¼Œå› æ­¤ï¼Œå¦‚æœä½ æƒ³è¦ä½¿ç”¨SSH urlå…‹éš†çš„è¯ï¼Œä½ å¿…é¡»æ˜¯è¿™ä¸ªé¡¹ç›®çš„æ‹¥æœ‰è€…ã€‚å¦åˆ™ä½ æ˜¯æ— æ³•æ·»åŠ SSH keyçš„ï¼Œå¦å¤– ssh é»˜è®¤æ˜¯æ¯æ¬¡ fetch å’Œ push ä»£ç éƒ½ä¸éœ€è¦è¾“å…¥è´¦å·å’Œå¯†ç ï¼Œå¦‚æœä½ æƒ³è¦æ¯æ¬¡éƒ½è¾“å…¥è´¦å·å¯†ç æ‰èƒ½è¿›è¡Œ fetch å’Œ push ä¹Ÿå¯ä»¥å¦å¤–è¿›è¡Œè®¾ç½®ã€‚\n\nä¸‹é¢ä¸»è¦æ˜¯è®²è¿°å¦‚ä½•é…ç½®ä½¿ç”¨ ssh æ–¹å¼æ¥æäº¤å’Œå…‹éš†ä»£ç ã€‚\n1ã€å…ˆåœ¨æœ¬åœ°ç”Ÿæˆç§˜é’¥ï¼Œå¦‚æœå…³è”å¤šä¸ª github è´¦å·å°±ç”Ÿæˆå¤šä¸ªç§˜é’¥ssh-keygen -t rsa -C â€œ&#x73;&#116;&#97;&#x72;&#x72;&#x79;&#101;&#118;&#x65;&#x40;&#x71;&#x71;&#x2e;&#99;&#111;&#x6d;â€œ -f ~/.ssh/id_rsa_my // æˆ‘è‡ªå·±çš„ sshssh-keygen -t rsa -C â€œ&#115;&#116;&#97;&#x72;&#114;&#x79;&#101;&#118;&#101;&#x40;&#x71;&#x71;&#46;&#x63;&#x6f;&#109;â€œ -f ~/.ssh/id_rsa_com // å…¬å¸çš„ sshä¸€è·¯å›è½¦ï¼Œä½¿ç”¨é»˜è®¤å€¼ï¼ŒæˆåŠŸååœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹æ‰¾åˆ°.ssh ç›®å½•ï¼Œé‡Œé¢æœ‰ id_rsa å’Œ id_rsa.pub ä¸¤ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸¤ä¸ªå°±æ˜¯ SSH Key çš„ç§˜é’¥å¯¹ï¼Œid_rsa æ˜¯ç§é’¥ï¼Œä¸èƒ½æ³„éœ²å‡ºå»ï¼Œid_rsa.pub æ˜¯å…¬é’¥ï¼Œå¯ä»¥æ”¾å¿ƒåœ°å‘Šè¯‰ä»»ä½•äººã€‚\nopen ï½/.ssh             // æ‰“å¼€sshæ‰€åœ¨ç›®å½•\n\n2ã€æŸ¥çœ‹ç”Ÿæˆçš„å…¬é’¥ï¼š\ncat ~/.ssh/id_rsa_my.pubâ€ƒ // è¿™é‡Œä¼šæŠŠå…¬é’¥æ˜¾ç¤ºå‡ºæ¥ï¼Œæˆ‘ä»¬æŠŠè¿™æ®µå†…å®¹å¤åˆ¶å‡ºæ¥ã€‚\n\n3ã€æ·»åŠ å…¬é’¥åˆ°è¿œç¨‹ä»“åº“:â€ƒ ç™»é™†ä½ çš„ github å¸æˆ· -&gt; ç‚¹å‡»å¤´åƒï¼Œç„¶åç‚¹å‡» Settings -&gt; å·¦æ ç‚¹å‡» SSH and GPG keys -&gt; ç‚¹å‡» New SSH keyâ€ƒ ç„¶åå°†å¤åˆ¶çš„å…¬é’¥å†…å®¹ï¼Œç²˜è´´è¿› Key æ–‡æœ¬åŸŸå†…ã€‚ title åŸŸï¼Œè‡ªå·±éšä¾¿èµ·ä¸ªåå­—ï¼Œå»ºè®®ä¸ç”µè„‘ä½ç½®æˆ–ä½œç”¨ç›¸å…³çš„åå­—ï¼Œä»Šåå¯èƒ½ä¼šæ–°å¢æˆ–è€…åˆ é™¤ sshï¼Œæ–¹ä¾¿äº†è§£æ˜¯ç”¨äºå“ªé‡Œçš„ã€‚\n4ã€æŸ¥çœ‹ ssh æ–‡ä»¶æ˜¯å¦é…ç½®æˆåŠŸssh -T &#x67;&#105;&#116;&#x40;&#103;&#105;&#116;&#104;&#x75;&#x62;&#46;&#x63;&#111;&#109;å¤åˆ¶ä»£ç è¾“å‡ºï¼š Hi danygitgit! Youâ€™ve successfully authenticated, but GitHub does not provide shell access.è®¾ç½®å·²ç»æˆåŠŸäº†ã€‚\n5ã€ä¿®æ”¹ git çš„ remote urlâ€ƒ å¦‚æœä¹‹å‰æ·»åŠ çš„æ˜¯ HTTPS åè®®çš„ github ä»“åº“åœ°å€ï¼Œé‚£ä¹ˆæ¯æ¬¡ push æˆ–è€… pull ä»ç„¶éœ€è¦å¯†ç ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶ä¿®æ”¹ä¸º ssh åè®®çš„ï¼Œè¿™æ ·ï¼Œå°±ä¸éœ€è¦è¿™ä¹ˆéº»çƒ¦äº†ã€‚â€ƒ é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ\n6ã€æŸ¥çœ‹å½“å‰çš„ remote urlâ€ƒ é¦–å…ˆè¿›å…¥æœ¬åœ°ä»“åº“ï¼Œå³é”® -&gt; Git Bash Heregit remote -vå¤åˆ¶ä»£ç è¾“å‡ºï¼š origin https://github.com/danygitgit/document-library.git (fetch)è¾“å‡ºï¼š origin https://github.com/danygitgit/document-library.git (push)å¤åˆ¶ä»£ç â€ƒ å¦‚æœæ˜¯ä»¥ä¸Šçš„ç»“æœé‚£ä¹ˆè¯´æ˜æ­¤é¡¹ç›®æ˜¯ä½¿ç”¨ https åè®®è¿›è¡Œè®¿é—®çš„ï¼ˆå¦‚æœåœ°å€æ˜¯ git å¼€å¤´åˆ™è¡¨ç¤ºæ˜¯ git åè®®ï¼‰\n7ã€å¤åˆ¶è¿œç¨‹ä»“åº“çš„ ssh é“¾æ¥â€ƒ ç™»é™†ä½ çš„è¿œç¨‹ä»“åº“ï¼Œåœ¨ä¸Šé¢å¯ä»¥çœ‹åˆ°ä½ çš„ ssh åè®®ç›¸åº”çš„ urlï¼Œç±»ä¼¼ï¼š\n&#x67;&#105;&#x74;&#64;&#x67;&#x69;&#x74;&#x68;&#117;&#98;&#46;&#99;&#111;&#109;:danygitgit/document-library.git\nå¤åˆ¶æ­¤ ssh é“¾æ¥ã€‚\n8ã€ä¿®æ”¹ git çš„ remote urlæ–¹æ³•æœ‰ä¸‰ç§ï¼š\nä¿®æ”¹å‘½ä»¤\ngit remote origin set-url [url]å¤åˆ¶ä»£ç \nå…ˆåˆ ååŠ \ngit remote rm originå¤åˆ¶ä»£ç git remote add origin [url]å¤åˆ¶ä»£ç \nç›´æ¥ä¿®æ”¹ config æ–‡ä»¶\næ‰¾åˆ°ä»“åº“ä¸‹ .git æ–‡ä»¶å¤¹ä¸‹çš„ config æ–‡ä»¶ï¼Œæ‰“å¼€ï¼Œå¯ä»¥çœ‹åˆ°ä»¥ä¸‹å†…å®¹\n[core] repositoryformatversion = 0 filemode = false bare = false logallrefupdates = true symlinks = false ignorecase = true[remote â€œoriginâ€] url =github.com/danygitgit/â€¦ fetch = +refs/heads/:refs/remotes/origin/[branch â€œmasterâ€] remote = origin merge = refs/heads/master\nå°†æ–‡ä»¶ä¸­çš„ url =https://github.com/danygitgit/document-library.git æ›´æ”¹ä¸º url = &#103;&#105;&#x74;&#64;&#103;&#105;&#116;&#104;&#x75;&#98;&#x2e;&#99;&#x6f;&#x6d;:danygitgit/document-library.git å³å¯ã€‚â€ƒ ä¿®æ”¹åçš„æ–‡ä»¶å¦‚ä¸‹\n[core] repositoryformatversion = 0 filemode = false bare = false logallrefupdates = true symlinks = false ignorecase = true[remote â€œoriginâ€] url = &#103;&#105;&#x74;&#64;&#103;&#105;&#116;&#104;&#x75;&#98;&#46;&#x63;&#x6f;&#x6d;:danygitgit/document-library.git fetch = +refs/heads/:refs/remotes/origin/[branch â€œmasterâ€] remote = origin merge = refs/heads/master\nä»¥åï¼Œä¸ç®¡æ˜¯ push è¿˜æ˜¯ pullï¼Œä½ éƒ½ä¸éœ€è¦å†æäº¤å¯†ç äº†ã€‚\nSourcetree é…ç½® ssh å¯†é’¥SourceTree æ˜¯ä¸€æ¬¾ git ç®¡ç†å¯è§†åŒ–å·¥å…·ï¼Œå°±ä¸éœ€è¦ç¹ççš„æ•²æ‰“å‘½ä»¤è¡Œäº†ã€‚ä¸ªäººæ¯”è¾ƒæ¨èï¼Œæ— è®ºåœ¨ windows ç¯å¢ƒè¿˜æ˜¯ mac çš„ os ç¯å¢ƒã€‚\nshell ç¯å¢ƒiterm2ç›´æ¥å»å®˜ç½‘ï¼Œitem2â€”â€”https://iterm2.com/\noh my zshå®˜æ–¹çš„ä¸‹è½½æ–¹æ¡ˆï¼š\nvia curlï¼š\nsh -c &quot;$(curl -fsSL https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;ohmyzsh&#x2F;ohmyzsh&#x2F;master&#x2F;tools&#x2F;install.sh)&quot;\n\nå¤åˆ¶ä»£ç \n\nvia wgetï¼š\nsh -c &quot;$(wget -O- https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;ohmyzsh&#x2F;ohmyzsh&#x2F;master&#x2F;tools&#x2F;install.s\n\nåŸºæœ¬ä¸Šéƒ½ä¸èƒ½æˆåŠŸï¼Œå¯ä»¥å…ˆç”¨git ä¸‹è½½ ï¼Œå†æ›¿æ¢ zshrcï¼š\ngit clone https://github.com/ohmyzsh/ohmyzsh.git ~/.oh-my-zsh\n\ncp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc\n\nnode ç¯å¢ƒå¯¹äºå‰ç«¯å·¥ç¨‹å¸ˆï¼Œnode ç¯å¢ƒå¿…ä¸å¯å°‘ï¼Œä¸€èˆ¬ç›´æ¥å®‰è£… nodejs å³å¯ï¼Œè¿™é‡Œä½¿ç”¨ nvm æ¥ç®¡ç† node ç‰ˆæœ¬ã€‚nvm æ˜¯ Mac ä¸‹çš„ node ç®¡ç†å·¥å…·ï¼Œæœ‰ç‚¹ç±»ä¼¼ç®¡ç† Ruby çš„ rvmï¼Œå¦‚æœæ˜¯éœ€è¦ç®¡ç† Windows ä¸‹çš„ nodeï¼Œå®˜æ–¹æ¨èæ˜¯ä½¿ç”¨ nvm æˆ– nvm-windows ã€‚\n\n\n\n\n\n\n\n\n\nMac ä¸‹é€šè¿‡ brew install nvm æ‰€å®‰è£…çš„ nvm ï¼Œç”±äºå®‰è£…è·¯å¾„ä¸åŒï¼Œæ— æ³•æ­£ç¡®å¯ç”¨ã€‚å»ºè®®ä½¿ç”¨ brew uninstall nvm å¸è½½æ‰ä¹‹åï¼Œé€šè¿‡ curl æˆ– wget å®‰è£…\nå®‰è£… nvmå¸è½½å·²æœ‰çš„ node/npmï¼šå¦‚æœä¹‹å‰æ˜¯åœ¨å®˜ç½‘ä¸‹è½½çš„ node å®‰è£…åŒ…ï¼Œè¿è¡Œåä¼šè‡ªåŠ¨å®‰è£…åœ¨å…¨å±€ç›®å½•ï¼Œå…¶ä¸­\nnode å‘½ä»¤åœ¨ /usr/local/bin/node ï¼Œnpm å‘½ä»¤åœ¨å…¨å±€ node_modules ç›®å½•ä¸­ï¼Œå…·ä½“è·¯å¾„ä¸º /usr/local/lib/node_modules/npm\nå®‰è£… nvm ä¹‹åæœ€å¥½å…ˆåˆ é™¤ä¸‹å·²å®‰è£…çš„ node å’Œå…¨å±€ node æ¨¡å—ï¼š\nnpm ls -g --depth&#x3D;0 #æŸ¥çœ‹å·²ç»å®‰è£…åœ¨å…¨å±€çš„æ¨¡å—ï¼Œä»¥ä¾¿åˆ é™¤è¿™äº›å…¨å±€æ¨¡å—åå†æŒ‰ç…§ä¸åŒçš„ node ç‰ˆæœ¬é‡æ–°è¿›è¡Œå…¨å±€å®‰è£…\n\nsudo rm -rf &#x2F;usr&#x2F;local&#x2F;lib&#x2F;node_modules #åˆ é™¤å…¨å±€ node_modules ç›®å½•\nsudo rm &#x2F;usr&#x2F;local&#x2F;bin&#x2F;node #åˆ é™¤ node\ncd  &#x2F;usr&#x2F;local&#x2F;bin &amp;&amp; ls -l | grep &quot;..&#x2F;lib&#x2F;node_modules&#x2F;&quot; | awk &#39;&#123;print $9&#125;&#39;| xargs rm #åˆ é™¤å…¨å±€ node æ¨¡å—æ³¨å†Œçš„è½¯é“¾\n\nå®‰è£… nvmcurl -o- https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;creationix&#x2F;nvm&#x2F;v0.29.0&#x2F;install.sh | bash\n\n\n\n\n\n\n\n\n\n\nè¿™é‡Œä½¿ç”¨äº† curl å®‰è£… nvm ä¼šä¸€ç›´å¤±è´¥ï¼Œå› ä¸ºæ€»æ‰€å‘¨ä¹‹å¤šåŸå› ï¼Œraw.githubusercontent.com çš„åŸŸåé­å— dns æ±¡æŸ“ï¼Œä½¿å¾—å›½å†…å‡ ä¹æ²¡åŠæ³•è®¿é—®ã€‚è§£å†³åŠæ³•æœ‰å¾ˆå¤šï¼Œè¿™é‡Œå›¾çœäº‹ï¼Œç›´æ¥å¼€ä»£ç†ï¼Œè¯¦æƒ…å‚è€ƒâ€”â€”\nå®‰è£… nvm ä¹‹åï¼Œå‡ºç° nvm command not found çš„é—®é¢˜ã€‚åŸå› æ˜¯Mac æ–°ç‰ˆæœ¬ä¸­ç»ˆç«¯æ˜¯ zshï¼Œæ‰€ä»¥ä½¿ç”¨ .bash_profile æ–‡ä»¶ä¸ä¼šç”Ÿæ•ˆï¼Œéœ€è¦ä½¿ç”¨ zsh çš„æ–‡ä»¶æ‰è¡Œã€‚\nè§£å†³\ncd ~\ntouch .zshrc\næ‰“å¼€ .zshrc æ–‡ä»¶\nå†™å…¥å¦‚ä¸‹ä»£ç \n\nexport NVM_DIR=\"$HOME/.nvm\"\n[ -s \"$NVM_DIR/nvm.sh\" ] &amp;&amp; \\. \"$NVM_DIR/nvm.sh\"  # This loads nvm\n[ -s \"$NVM_DIR/bash_completion\" ] &amp;&amp; \\. \"$NVM_DIR/bash_completion\"  # This loads nvm bash_completion\nå¤åˆ¶ä»£ç \n\n\nä¿å­˜\n\nsource ~/.zshrc\n\né€€å‡ºç»ˆç«¯ï¼Œé‡æ–°æ‰“å¼€ï¼Œä½¿ç”¨ nvm å‘½ä»¤å³å¯\n\n\nå‡çº§ nvm çš„ä¸‰ç§æ–¹å¼\né€šè¿‡ zsh-nvm\nå¦‚æœä½ çš„ shell ç”¨çš„æ˜¯zshï¼Œé‚£ä¹ˆä½ å¯ä»¥å®‰è£…zsh-nvmï¼Œå®ƒä½œä¸º zsh çš„æ’ä»¶ï¼Œæä¾›äº†nvm upgradeçš„å‘½ä»¤ï¼Œè€Œä¸”å®ƒä¼šè‡ªåŠ¨å¸®ä½ é…ç½® nvm åˆ°ç¯å¢ƒä¸­ã€‚è¿™ä¸ªæ–¹æ¡ˆæœ€æ–¹ä¾¿ï¼Œåªè¦ä½ ç”¨zshå°±è¡Œäº†ï¼Œä¸è¿‡zsh-nvm å®˜æ–¹æ–‡æ¡£è¡¨ç¤ºå°±ç®—ä½ ç”¨bashä¹Ÿæ˜¯å¯ä»¥æ”¯æŒçš„ã€‚\ngit clone https://github.com/lukechilds/zsh-nvm ~/.oh-my-zsh/custom/plugins/zsh-nvm\n\nä¸‹è½½å®Œå†é€šè¿‡vimæ·»åŠ åˆ°.zshrc\nplugins+=(zsh-nvm)\né€šè¿‡ git\nNVM å®‰è£…çš„è¿‡ç¨‹å…¶å®å°±æ˜¯æŠŠ NVM çš„ä»£ç ç›´æ¥é€šè¿‡ git æ‹‰åˆ°~/.nvmç›®å½•ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå°±æ˜¯æ ‡å‡†çš„ git æ‰˜ç®¡çš„ç›®å½•ï¼Œé‚£ä¹ˆè¦æƒ³æ›´æ–°å°±å¯ä»¥ç›´æ¥åˆ°è¿™ä¸ªç›®å½•ä¸‹ï¼Œå¹¶é€šè¿‡ git æ›´æ–°åˆ°æœ€æ–°ä»£ç æˆ–è€…æŸä¸ªç‰ˆæœ¬çš„ä»£ç å°±è¡Œäº†ã€‚\n\né‡æ–°å®‰è£…ä¸€é\nå†é€šè¿‡curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.31.4/install.sh | bashé‡æ–°è¿è¡Œä¸€éå®‰è£…è„šæœ¬å°±è¡Œäº†ï¼Œå®ƒå®é™…ä¸Šå°±æ˜¯é€šè¿‡ git å†æŠŠä»£ç æ›´æ–°åˆ°æŸä¸ªç‰ˆæœ¬ï¼ŒåŸç†å’Œ 2 æ˜¯ç›¸åŒçš„ã€‚\n\n\nå®‰è£…å¤šä¸ª node1. æŸ¥çœ‹ä¸‹å½“å‰å¯ç”¨çš„nodeç‰ˆæœ¬\n   $ nvm lsæˆ–è€…nvm list\n2. é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬å®‰è£…\n   nvm install 10.15.3          &#x2F;&#x2F; å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„nodeï¼Œä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°è¯¥ç‰ˆæœ¬\n   nvm install node             &#x2F;&#x2F; å®‰è£…æœ€æ–°ç¨³å®šç‰ˆæœ¬çš„nodeï¼ˆå³currentç‰ˆæœ¬ï¼‰\n3. æŸ¥çœ‹å®‰è£…æ˜¯å¦æˆåŠŸ\n   $ node -v\n4. æ›´å¤šnvmå‘½ä»¤å‚è€ƒ\n   nvm ls-remote                &#x2F;&#x2F; æŸ¥çœ‹æœåŠ¡å™¨ä¸Šçš„nodeçš„æ‰€æœ‰å¯ç”¨ç‰ˆæœ¬\n   nvm uninstall 10.15.3        &#x2F;&#x2F; å¸è½½æŸä¸ªç‰ˆæœ¬çš„node\n   nvm use 10.15.3              &#x2F;&#x2F; åˆ‡æ¢åˆ°æŸä¸ªç‰ˆæœ¬çš„node\n   nvm alias LTS 10.15.3        &#x2F;&#x2F; ç»™æŸä¸ªç‰ˆæœ¬èµ·ä¸ªåˆ«å\n   nvm unalias LTS              &#x2F;&#x2F; å–æ¶ˆåˆ«å\n\nå®‰è£…åè¦ä¸º shell è®¾ç½®ä¸€ä¸ªé»˜è®¤ node ç‰ˆæœ¬ï¼Œä¸ç„¶æ¯æ¬¡æ‰“å¼€éƒ½è¦ useã€‚\nnvm alias default 16.10.0    // å› ä¸ºæˆ‘ä¸º16.10.0è®¾ç½®äº†åˆ«åï¼Œæ‰€ä»¥ç”¨åˆ«åå’Œç‰ˆæœ¬éƒ½å¯ä»¥\n\nå®‰è£… yarn\nMacOS ç›´æ¥ä½¿ç”¨è„šæœ¬\n\ncurl -o- -L https://yarnpkg.com/install.sh | bash\nå¤åˆ¶ä»£ç \n\n\nHomebrew æ–¹å¼\n\nbrew install yarn\n\n\nnpm æ–¹å¼\n\nnpm install -g yarn\nå¤åˆ¶ä»£ç \n\næŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ\nyarn --version\n\nå®‰è£… vue-cliVue æä¾›äº†ä¸€ä¸ªå®˜æ–¹çš„ CLIï¼Œä¸ºå•é¡µé¢åº”ç”¨ (SPA) å¿«é€Ÿæ­å»ºç¹æ‚çš„è„šæ‰‹æ¶ã€‚å®ƒä¸ºç°ä»£å‰ç«¯å·¥ä½œæµæä¾›äº†åŠŸèƒ½é½å¤‡çš„æ„å»ºè®¾ç½®ã€‚åªéœ€è¦å‡ åˆ†é’Ÿçš„æ—¶é—´å°±å¯ä»¥è¿è¡Œèµ·æ¥å¹¶å¸¦æœ‰çƒ­é‡è½½ã€ä¿å­˜æ—¶ lint æ ¡éªŒï¼Œä»¥åŠç”Ÿäº§ç¯å¢ƒå¯ç”¨çš„æ„å»ºç‰ˆæœ¬ã€‚æ›´å¤šè¯¦æƒ…å¯æŸ¥é˜… Vue CLI çš„æ–‡æ¡£ã€‚\nå¯¹äº Vue 3ï¼Œä½ åº”è¯¥ä½¿ç”¨ npm ä¸Šå¯ç”¨çš„ Vue CLI v4.5 ä½œä¸º @vue/cliã€‚è¦å‡çº§ï¼Œä½ åº”è¯¥éœ€è¦å…¨å±€é‡æ–°å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ @vue/cliï¼š\nyarn global add @vue/cli\n# æˆ–\nnpm install -g @vue/cli\n\nç„¶ååœ¨ Vue é¡¹ç›®ä¸­è¿è¡Œï¼š\nvue upgrade --next\n\næ–‡æ¡£ç±»typoraå†™æ–‡æ¡£ï¼Œå†™åšå®¢çš„å¿…å¤‡è½¯ä»¶â€”â€”https://typora.io/\npicgoå›¾åºŠï¼Œæ­é… typora ä½¿ç”¨â€”â€”https://github.com/Molunerfinn/PicGo/releases\nå®‰è£…ä¹‹åæ‰“å¼€ä¸»ç•Œé¢\n\né€‰æ‹©æœ€åº•ä¸‹çš„æ’ä»¶è®¾ç½®ï¼Œæœç´¢gitee\n\nç‚¹å‡»å³è¾¹çš„ gitee-uploader 1.1.2 å¼€å§‹å®‰è£…\n\n\n\n\n\n\n\n\n\nè¿™é‡Œæ³¨æ„ä¸€ä¸‹ï¼Œå¿…é¡»è¦å…ˆå®‰è£…node.jsæ‰èƒ½å®‰è£…æ’ä»¶ï¼Œæ²¡è£…çš„è‡ªå·±è£…ä¸€ä¸‹ï¼Œç„¶åé‡å¯å°±è¡Œã€‚\næ³¨å†Œä¸€ä¸ª gitee è´¦æˆ·ï¼Œåˆ›å»ºä¸€ä¸ªä¸“é—¨ç”¨æ¥æ”¾å›¾ç‰‡çš„ä»“åº“ï¼Œç„¶åæŒ‰å¦‚ä¸‹é…ç½®å³å¯ã€‚\n\nhexohexo æ˜¯é™æ€ç½‘é¡µæ­å»ºå¹³å°ï¼Œæ”¯æŒ markdownï¼Œå¹³æ—¶å†™æ–‡ç« å†™åšå®¢éƒ½å¾ˆæ–¹ä¾¿ã€‚\nå®‰è£…hexo éœ€è¦ node ç¯å¢ƒï¼Œä½¿ç”¨å›½å†… npm æºæ›´å®¹æ˜“å®‰è£…æˆåŠŸã€‚\nnpm install -g cnpm --registry=https://registry.npm.taobao.org\ncnpm install hexo-cli -g\n\nå®‰è£…å®Œæˆä»¥åï¼Œéœ€è¦åˆå§‹åŒ–ä¸€ä¸‹é¡¹ç›®ï¼Œæ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼š\n$ hexo init\n$ npm install\n\nå®Œæˆä»¥åï¼Œé¡¹ç›®å¤§æ¦‚ç›®å½•å°±æ˜¯è¿™æ ·çš„ï¼š\n.\nâ”œâ”€â”€ _config.yml\nâ”œâ”€â”€ package.json\nâ”œâ”€â”€ scaffolds\nâ”œâ”€â”€ source\n|   â”œâ”€â”€ _drafts\n|   â””â”€â”€ _posts\nâ””â”€â”€ themes\n\n_config.ymlç½‘ç«™çš„é…ç½®ä¿¡æ¯ï¼Œå¯ä»¥åœ¨æ­¤é…ç½®å¤§éƒ¨åˆ†çš„å‚æ•°ã€‚\npackage.jsonåº”ç”¨ç¨‹åºçš„ä¿¡æ¯ã€‚\n\næ¥ä¸‹æ¥å¯ä»¥åœ¨æœ¬åœ°å¯æœåŠ¡æ¥æŸ¥çœ‹ä¸€ä¸‹é¡¹ç›®çš„åˆå§‹çŠ¶æ€ï¼š\n$ npm install hexo-server --save\n$ hexo server\n\næ•ˆæœå¤§æ¦‚å°±æ˜¯ä¸‹é¢çš„æ ·å­ï¼š\nhexo ä¸Šæœ‰å¾ˆå¤šå¼€æºçš„ä¸»é¢˜ï¼Œæœ‰æ—¶é—´å¯ä»¥æ…¢æ…¢æŠ˜è…¾ï¼Œè¿™é‡Œä¸åšä»‹ç»ã€‚\néƒ¨ç½²1ã€github ä¸Šæ–°å»ºä¸€ä¸ªä»“åº“\n\nç™»å½•è‡ªå·±çš„ github åï¼Œåœ¨ç•Œé¢å³ä¸Šè§’ç”¨æˆ·ä¿¡æ¯ç‚¹å‡»å·¦è¾¹çš„åŠ å·ï¼Œæ–°å»ºä¸€ä¸ªä¸ç”¨æˆ·åå­—ç›¸åŒçš„ repositoryï¼Œgithub ä¼šé»˜è®¤è®¾ç½®æˆç”¨æˆ·çš„åšå®¢ï¼š\nè®¾ç½®é¡µé¢é‡Œé¢æœ‰åˆ†æ”¯é€‰é¡¹ï¼Œå¦‚æœæœ‰ master åˆ†æ”¯ï¼Œä¼šé»˜è®¤æˆåšå®¢çš„é¦–é€‰ä»£ç ï¼›\n\n2ã€å°†æœ¬åœ°æ­å»ºå¥½çš„ hexo å‘å¸ƒåˆ° github ä¸Šï¼š\nå®‰è£…æ’ä»¶ï¼š\nnpm install hexo-deployer-git --save\n\nä¿®æ”¹ç½‘ç«™é…ç½®æ–‡ä»¶_config.yml,æ·»åŠ  deploy ä¿¡æ¯ï¼š\ndeploy:\n  type: git\n  repo: git@github.com:starryeve&#x2F;starryeve.github.io.git\n  branch: master\n\nä¸Šé¢çš„ repo çš„é…ç½®ä¿¡æ¯ï¼Œæ›¿æ¢æˆè‡ªå·±çš„é¡¹ç›®åå­—\n\n3ã€ç”Ÿæˆ SSH key:\næŒ‰ç…§ç½‘ä¸Šçš„æ•™ç¨‹ç”Ÿæˆ ssh key çš„æ—¶å€™æ˜¯ç›´æ¥ ssh-add,ä½†æ˜¯å¤±è´¥äº†ï¼Œè°ƒæŸ¥é—®é¢˜ï¼Œå‘ç°åŸå› æ˜¯å› ä¸ºï¼Œæˆ‘æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ ssh-agent ä»£ç†ï¼Œç¬¬ä¸€æ¬¡éœ€è¦é¦–å…ˆæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä»¥åå°±ä¸éœ€è¦äº†ï¼ˆå…·ä½“åŸæ¥è¯·å‚è€ƒæ­¤å¤„é“¾æ¥ï¼‰ï¼š\n$ ssh-agent bash\n\nä»¥ä¸Šå‘½ä»¤å›è½¦ï¼Œå¯åŠ¨è¿›ç¨‹ï¼Œåå†è¾“å…¥å‘½ä»¤ï¼š\n$ ssh-add ~&#x2F;.ssh&#x2F;id_rsa_blog\n\næ¥ä¸‹æ¥çš„æ“ä½œå°±è·Ÿä¸Šé¢é…ç½® ssh å®Œå…¨ä¸€æ ·äº†ï¼Œä¸è¿‡å¤šä»‹ç»ã€‚\n\néªŒè¯æ˜¯å¦è¿æ¥æˆåŠŸï¼š\n$ ssh -T git@github.com\n\nå‡ºç°ä¸‹é¢çš„è¯­å¥è¯´æ˜ä½ çš„ ssh key å·²ç»é…ç½®å¥½äº†\nHi wispyoureyes! You've successfully authenticated, but GitHub does not provide shell access.\n\n\nåˆ°è¿™ä¸ºæ­¢ï¼Œæœ¬åœ°è·Ÿè¿œç¨‹ github çš„è¿æ¥å·²ç»å»ºç«‹ï¼Œåœ¨é¡¹ç›®ä¸­ï¼Œç›´æ¥ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œä¸Šä¼ å°±å¯ä»¥äº†ï¼š\n$ hexo clean  &#x2F;&#x2F;æ¸…é™¤ç¼“å­˜æ–‡ä»¶db.jsonå’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶public\n$ hexo g   &#x2F;&#x2F;ç”Ÿæˆç½‘ç«™é™æ€æ–‡ä»¶åˆ°é»˜è®¤è®¾ç½®çš„publicæ–‡ä»¶å¤¹\n$ hexo d   &#x2F;&#x2F;éƒ¨ç½²ç½‘ç«™åˆ°è®¾å®šçš„ä»“åº“\n\nè½¯ä»¶å·¥å…·\n\n\n\n\n\n\n\n\nä»¥ä¸‹æ˜¯ mac å¿…å¤‡è½¯ä»¶æ¨èï¼Œè¿™é‡Œæ¨èä¸¤ä¸ª mac èµ„æºç½‘ç«™ï¼šxclientã€macwkã€‚\nå‚è€ƒé“¾æ¥nvmï¼šhttps://www.cnblogs.com/kaiye/p/4937191.html\nhttps://juejin.cn/post/6979140141134643236\nhttps://www.jianshu.com/p/045df8e20ebe\nmac ä¸‹ç¯å¢ƒhttps://juejin.cn/post/6844904167882883085\n","slug":"winå‘macç¯å¢ƒè¿ç§»","date":"2021-10-02T16:22:33.000Z","categories_index":"","tags_index":"","author_index":"EVE"},{"id":"e51132035092c368289183fb10ca1df0","title":"User-Agentçš„åº”ç”¨åœºæ™¯","content":"\n\nå‰è¨€è¿™ç¯‡æ–‡ç« çš„æ¥æºæ˜¯æœ‹å‹é¢è¯•å”¯å“ä¼šæ—¶çš„ä¸€ä¸ªåœºæ™¯é¢˜ç›®â€”â€”å¦‚ä½•æ ¹æ®ç”¨æˆ·çš„æ‰‹æœºå‹å·è·³è½¬å¯¹åº”é“¾æ¥å¹¶å”¤èµ·å¯¹åº”å‚å•†çš„åº”ç”¨å•†åº—ã€‚é—®é¢˜çš„å…³é”®åœ¨äºè·å–ç”¨æˆ·çš„è®¾å¤‡ä¿¡æ¯ï¼Œå¾®ä¿¡å°ç¨‹åºæä¾›çš„wx.getSystemInfo(Object object)apiå°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä½†é¢è¯•å®˜é—®çš„åº”è¯¥æ˜¯h5å®¢æˆ·ç«¯çš„è·³è½¬ï¼Œæµè§ˆå™¨å¹¶æ²¡æœ‰ç›´æ¥æä¾›ç±»ä¼¼çš„apiå¯ä»¥è°ƒç”¨ã€‚é¢è¯•å®˜æœ€åç»™çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œä½¿ç”¨httpsçš„User-Agentã€‚\nUser-Agentä»‹ç»User-Agentsæ˜¯httpsè¯·æ±‚å¤´çš„ä¸€ä¸ªå­—æ®µï¼Œå…¶å€¼ä¸ºä¸€ä¸ªç‰¹å¾å­—ç¬¦ä¸²ï¼Œç”¨æ¥è®©ç½‘ç»œåè®®çš„å¯¹ç«¯è¯†åˆ«å‘èµ·è¯·æ±‚çš„ç”¨æˆ·ä»£ç†è½¯ä»¶çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚åº”ç”¨ç±»å‹ã€æµè§ˆå™¨ã€æ“ä½œç³»ç»Ÿä»¥åŠç‰ˆæœ¬å·ç­‰ã€‚\næ ¼å¼UAå¹¶æ²¡æœ‰ä¸€ä¸ªååˆ†æ ‡å‡†çš„ä¹¦å†™æ ¼å¼ï¼Œæ‰€ä»¥å¾ˆå¤šæµè§ˆå™¨ä½¿ç”¨çš„æ ¼å¼éƒ½ä¸ç›¸åŒï¼Œæœ‰äº›å‚å•†è¿˜å°†å¤§é‡çš„ä¿¡æ¯å¡è¿›UAã€‚\nUser-Agent: &lt;product&gt; &#x2F; &lt;product-version&gt; &lt;comment&gt;\n\né€šå¸¸ï¼ŒUAçš„è¯­æ³•åŒ…æ‹¬ä¸‰éƒ¨åˆ†ï¼š\n\n\näº§å“è¯†åˆ«ç ã€‚\n\näº§å“ç‰ˆæœ¬å·ã€‚\n\né›¶ä¸ªæˆ–å¤šä¸ªå…³äºç»„æˆäº§å“ä¿¡æ¯çš„æ³¨é‡Šã€‚\n\nä¾‹å­ä»¥æˆ‘æœ¬æœºä½¿ç”¨chromeè®¿é—®mdnä¸ºä¾‹ï¼ˆå¦‚æœæ˜¯ç§»åŠ¨ç«¯æƒ³æŸ¥çœ‹UAå¯ä»¥è®¿é—®https://www.whatismybrowser.com/ï¼‰\nMozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;93.0.4577.82 Safari&#x2F;537.36\n\n\nMozilla/5.0ï¼šè¡¨ç¤ºæµè§ˆå™¨å…¼å®¹Mozillaçš„é€šç”¨æ ‡å¿—ï¼Œç›®å‰å‡ ä¹æ‰€æœ‰æµè§ˆå™¨éƒ½é€šç”¨ã€‚\n(Windows NT 10.0; Win64; x64ï¼šå®¢æˆ·ç«¯æ‰€è¿è¡Œçš„åŸç”Ÿæ“ä½œç³»ç»Ÿæ˜¯NT 10.0ç‰ˆæœ¬(å¹¶ä¸”è¿è¡Œåœ¨64ä½Windowsæœºå™¨ä¸Š)ã€‚\nAppleWebKit/537.36 (KHTML, like Gecko) ï¼šè´Ÿè´£åœ¨è¯¥è®¾å¤‡ä¸Šæ¸²æŸ“å†…å®¹çš„å¼•æ“æ˜¯AppleWebKitç‰ˆæœ¬537.36 (KHTMLï¼Œä¸€ä¸ªå¼€æºå¸ƒå±€å¼•æ“)ã€‚\nChrome/93.0.4577.82 ï¼šå®¢æˆ·ç«¯ä½¿ç”¨Chrome 93.0.4577.82ã€‚\nSafari/537.36ï¼šå®¢æˆ·ç«¯åŸºäºSafari/537.36ã€‚\n\n\n\n\n\n\n\n\n\n\nä¸€äº›å¸¸è§çš„æµè§ˆå™¨UAï¼Œä¹Ÿéƒ½å¯ä»¥åœ¨MDNä¸ŠæŸ¥å¾—åˆ°ï¼šUser Agent\nä½¿ç”¨ï¼šnavigator.userAgentnavigatorå¯¹è±¡ä¸‹æœ‰ä¸€ä¸ªåªè¯»çš„userAgentå±æ€§ï¼Œä¼šè¿”å›å½“å‰æµè§ˆå™¨çš„User Agentã€‚(navigatorå¯¹è±¡ä¸‹åŒ…å«äº†è®¸å¤šå­˜å‚¨ç”¨æˆ·ä¿¡æ¯çš„æˆå‘˜å˜é‡ï¼Œä¸”éƒ½æ˜¯åªè¯»çš„)\nconsole.log(window.navigator.userAgent) \n// Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.82 Safari/537.36\n\nåº”ç”¨åœºæ™¯æµè§ˆå™¨æ£€æµ‹åœ¨åšä¸€äº›é¡µé¢æ—¶ï¼Œéœ€è¦é’ˆå¯¹ä¸åŒçš„æµè§ˆå™¨å¤„ç†ä¸åŒçš„é€»è¾‘ï¼Œæœ€ç®€å•çš„å°±æ˜¯åŒºåˆ†pcå’Œç§»åŠ¨ç«¯çš„æµè§ˆå™¨ï¼Œæˆ–æ˜¯android å’Œiosä¸‹çš„æµè§ˆå™¨ã€‚é‡åˆ°ä¸€äº›é«˜ç‰ˆæœ¬çš„æ¡†æ¶æˆ–ç¬¬ä¸‰æ–¹æ’ä»¶åº“çš„ä»£ç ä¸æ”¯æŒieç­‰éç°ä»£æµè§ˆå™¨ç­‰ç­‰ï¼Œå°±å¯ä»¥é€šè¿‡åˆ†æUAï¼Œè·å¾—å…¶å†…æ ¸åšåˆ¤æ–­ã€‚\nå‰ç«¯æ€§èƒ½è°ƒæ§ç¯å¢ƒä¿¡æ¯æ˜¯æ¯ä¸ªç›‘æ§ç³»ç»Ÿå¿…å¤‡çš„å†…å®¹ï¼Œé€šè¿‡UAèƒ½çŸ¥é“ç”¨æˆ·çš„è®¾å¤‡å’Œè¿è¡Œå¹³å°ï¼Œä»è€Œå¿«é€Ÿå®šä½é—®é¢˜ï¼Œ è§£å†³é—®é¢˜ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¹Ÿæœ‰å¾ˆå¤šæ•°æ®ç»Ÿè®¡å¹³å°é€šè¿‡UAåˆ†æç”¨æˆ·ç”»åƒã€‚\n\nçˆ¬è™«ç¨‹åºä¼ªé€ åœ¨å·¥ä½œä¸­è¿›è¡Œçˆ¬è™«ç½‘ç«™æ—¶ï¼Œä¸€èˆ¬ç½‘ç«™æ˜¯ä¸å…è®¸è¢«çˆ¬è™«è®¿é—®çš„ï¼Œç»å¸¸ä¼šéœ€è¦æä¾›User-Agentã€‚çˆ¬å–è¿‡ç¨‹ä¸­åŠ¨æ€æ›´æ¢åœ¨User-agentï¼Œå¯ä»¥ä¼ªè£…æˆæµè§ˆå™¨çš„å½¢å¼ã€‚å¦‚æœä¸æä¾›User-Agentï¼Œä¼šå¯¼è‡´çˆ¬è™«åœ¨è¯·æ±‚ç½‘é¡µæ—¶ï¼Œè¯·æ±‚å¤±è´¥ã€‚\næ‰‹æœºå‹å·å”¤èµ·å‚å•†åº”ç”¨å•†åº—åœ¨H5ç­‰ç§»åŠ¨ç«¯é¡µé¢ä¸Šï¼Œç»å¸¸ä¼šç”¨åˆ°ä¸€ä¸ªå¼•å¯¼é¡µé¢ï¼Œç‚¹å‡»æŒ‰é’®è·³è½¬ä¸‹è½½é“¾æ¥ã€‚é€šå¸¸é¡µé¢ä¼šè‡ªåŠ¨åˆ¤æ–­æ‰‹æœºï¼ŒiOSè·³è½¬AppStoreï¼ŒAndroidç›´æ¥è·³è½¬ä¸‹è½½é“¾æ¥æˆ–è€…å¯¹åº”çš„åº”ç”¨å•†åº—é¡µé¢ã€‚å¼•å¯¼é¡µä¹Ÿå«åšè½åœ°é¡µï¼Œæ‰¿æ‹…ç€å¼•æµçš„èŒè´£ã€‚å¼•æµæœ‰ä¸¤ç§å½¢å¼ï¼Œä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºå”¤ç«¯çš„å®šä¹‰ï¼š\n\nå¼•å¯¼å·²ä¸‹è½½ç”¨æˆ·æ‰“å¼€APPã€‚\nå¼•å¯¼æœªä¸‹è½½ç”¨æˆ·ä¸‹è½½APPã€‚\n\n\n\n\n\n\n\n\n\n\nhttps://juejin.cn/post/6844903664155525127  https://juejin.cn/post/6844903951771369479  https://cloud.tencent.com/developer/article/1537372  https://sq.sf.163.com/blog/article/158315832059072512\né¿å…CDNä¸ºPCç«¯ç¼“å­˜ç§»åŠ¨ç«¯é¡µé¢å¦‚æœ PC ç«¯å’Œç§»åŠ¨ç«¯æ˜¯ä¸€å¥—ä»£ç åˆ™ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ã€‚ã€Œè¿™ä¸ªé—®é¢˜å‡ºç°åœ¨ PC ç«¯å’Œç§»åŠ¨ç«¯æ˜¯ä¸¤å¥—ä»£ç ï¼Œå´å…±ç”¨ä¸€ä¸ªåŸŸåã€‚ã€\nä½¿ç”¨ nginx é…ç½®å¦‚ä¸‹ï¼Œæ ¹æ® UA åˆ¤æ–­æ˜¯å¦ç§»åŠ¨ç«¯ï¼Œè€Œèµ°ä¸åŒçš„é€»è¾‘ (åˆ¤æ–­UAæ˜¯å¦ç§»åŠ¨ç«¯å®¹æ˜“å‡ºé—®é¢˜)\nlocation / &#123;\n    // é»˜è®¤ PC ç«¯\n    root /usr/local/website/web;\n    \n    # åˆ¤æ–­ UAï¼Œè®¿é—®ç§»åŠ¨ç«¯\n    if ( $http_user_agent ~* \"(Android|webOS|iPhone|iPad|BlackBerry)\" )&#123;\n        root /usr/local/website/mobile;\n    &#125;\n \n    index index.html index.htm;\n&#125;\n\nè§£å†³æ–¹æ¡ˆé€šå¸¸ä½¿ç”¨ Vary å“åº”å¤´ï¼Œæ¥æ§åˆ¶ CDN å¯¹ä¸åŒè¯·æ±‚å¤´çš„ç¼“å­˜ã€‚\nã€Œæ­¤å¤„å¯ä»¥ä½¿ç”¨ Vary: User-Agent ï¼Œä»£è¡¨å¦‚æœ User-Agent ä¸ä¸€æ ·ï¼Œåˆ™é‡æ–°å‘èµ·è¯·æ±‚ï¼Œè€Œéä»ç¼“å­˜ä¸­è¯»å–é¡µé¢ã€\nVary: User-Agent\n\nå½“ç„¶ï¼ŒUser-Agent å®åœ¨è¿‡å¤šï¼Œæ­¤æ—¶ç¼“å­˜å¤±æ•ˆå°±ä¼šè¿‡å¤šã€‚\n\n\n\n\n\n\n\n\n\nhttps://cloud.tencent.com/developer/article/1662201\nã€‚ã€‚ã€‚\næ€»ç»“User-Agentæ˜¯ä¸€ç§å‘è®¿é—®ç½‘ç«™æä¾›ä½ æ‰€ä½¿ç”¨çš„æµè§ˆå™¨ç±»å‹åŠç‰ˆæœ¬ã€æ“ä½œç³»ç»ŸåŠç‰ˆæœ¬ã€æµè§ˆå™¨å†…æ ¸ã€ç­‰ä¿¡æ¯çš„æ ‡è¯†ã€‚æ ¸å¿ƒä½œç”¨å°±æ˜¯è®©è¢«è®¿é—®çš„ç«™ç‚¹çŸ¥é“ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯ï¼Œä»è€Œæä¾›ä¸åŒçš„å¸ƒå±€æ¸²æŸ“æˆ–ç‰¹æ®Šå“åº”ã€‚åœ¨ç”¨æˆ·ç¯å¢ƒå·®åˆ«å·¨å¤§çš„ç§»åŠ¨ç«¯é¢†åŸŸï¼Œä½¿ç”¨åœºæ™¯å°¤ä¸ºå¹¿æ³›ã€‚\nå‚è€ƒé“¾æ¥\n\n\n\n\n\n\n\n\n Mozilla5.0  history of the browser  user-agent  æµè§ˆå™¨UserAgentçš„è¶£å‘³å²\n","slug":"user-agentæ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›åº”ç”¨åœºæ™¯ï¼Ÿ","date":"2021-09-28T08:00:53.000Z","categories_index":"","tags_index":"","author_index":"EVE"},{"id":"e2cb4e89611544cf3c6b12db41ef12fa","title":"gitå·¥ä½œæµç¨‹","content":"gitæµç¨‹\ngit clone å…‹éš†è¿œç¨‹èµ„æºåˆ°æœ¬åœ°ç›®å½•ï¼Œä½œä¸ºå·¥ä½œåŒº\nåœ¨å·¥ä½œåŒºä¸Šä¿®æ”¹æ–‡ä»¶\næ¯æ¬¡ä¿®æ”¹å‰ï¼Œå…ˆåˆ‡æ¢masterä¸»åˆ†æ”¯ï¼Œä½¿ç”¨git pullæ‹‰å–è¿œç¨‹èµ„æºï¼Œmergeåˆå¹¶åˆ°æœ¬åœ°å¼€å‘åˆ†æ”¯ï¼Œä»¥æ›´æ–°æœ¬åœ°æ–‡ä»¶\næœ¬åœ°ä¿®æ”¹åï¼Œé€šè¿‡git statusæŸ¥çœ‹æ–‡ä»¶çŠ¶æ€ï¼Œä½¿ç”¨git addæ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº\ngit commitå°†æ”¹åŠ¨ä»æš‚å­˜åŒºæ·»åŠ åˆ°å½“å‰æœ¬åœ°ä»“åº“\ngit push å°†ä¿®æ”¹ä»æœ¬åœ°ä»“åº“æ¨é€åˆ°è¿œç«¯ä»“åº“\n\n\nåˆ†æ”¯æ“ä½œ\næŸ¥çœ‹åˆ†æ”¯ï¼Œ-aæŸ¥çœ‹è¿œç¨‹ï¼š\ngit branch -a\n\nåˆ›å»ºåˆ†æ”¯ï¼Œ-båˆ›å»ºåˆ†æ”¯åï¼Œåˆ‡æ¢åˆ°æ–°çš„åˆ†æ”¯å·¥ä½œï¼š\ngit checkout -b ean\n\næäº¤æœ¬åœ°åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“ï¼š\ngit push origin ean \n\nåˆå¹¶åˆ†æ”¯ï¼š\ngit checkout master\ngit merge dev\n\nå¤„ç†å†²çªï¼š\n\nåˆ é™¤è¿œç¨‹åˆ†æ”¯ï¼š\ngit push --delete origin dev\n\n\nstashæ“ä½œ(åªèƒ½æš‚å­˜å·²è·Ÿè¸ªçš„ï¼Œä¸èƒ½æš‚å­˜æ–°æ·»åŠ çš„)åº”ç”¨åœºæ™¯ï¼š\nå½“æ­£åœ¨devåˆ†æ”¯ä¸Šå¼€å‘æŸä¸ªæ¨¡å—æ—¶ï¼Œé¡¹ç›®ä¸­å‡ºç°äº†ä¸€ä¸ªbugï¼Œéœ€è¦ç´§æ€¥ä¿®å¤ï¼Œè€Œæ­£åœ¨å¼€å‘çš„å†…å®¹åªæ˜¯å®Œæˆä¸€åŠï¼Œè¿˜ä¸æƒ³æäº¤ï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨git stashså°†ä¿®æ”¹çš„å†…å®¹ä¿å­˜åˆ°å †æ ˆåŒºï¼Œåˆ‡æ¢hotfixåˆ†æ”¯è¿›è¡Œbugä¿®å¤ã€‚ä¿®å¤å®Œæˆåï¼Œå†åˆ‡å›åˆ°devï¼Œä»å †æ ˆä¸­æ¢å¤åˆšåˆšä¿å­˜çš„å†…å®¹ã€‚\nç”±äºç–å¿½ï¼Œæœ¬åº”è¯¥åœ¨devåˆ†æ”¯ä¸Šå¼€å‘çš„å†…å®¹ï¼Œå´åœ¨masterä¸Šè¿›è¡Œäº†å¼€å‘ï¼Œéœ€è¦é‡æ–°åˆ‡å›åˆ°devåˆ†æ”¯ä¸Šè¿›è¡Œå¼€å‘ï¼Œå¯ä»¥ç”¨git stashå°†å†…å®¹ä¿å­˜åˆ°å †æ ˆä¸­ï¼Œåˆ‡å›åˆ°devï¼Œå†æ¬¡æ¢å¤å†…å®¹å³å¯ã€‚\n\nå‘½ä»¤ï¼š\ngit stash\nèƒ½å¤Ÿå°†æ‰€æœ‰æœªæäº¤çš„ä¿®æ”¹ï¼ˆå·¥ä½œåŒºå’Œæš‚å­˜åŒºï¼‰ä¿å­˜è‡³å †æ ˆä¸­ï¼Œç”¨äºåç»­æ¢å¤å½“å‰å·¥ä½œç›®å½•\n\ngit stash save\nä½œç”¨ç­‰åŒäºgit stashï¼ŒåŒºåˆ«æ˜¯å¯ä»¥åŠ ä¸€äº›æ³¨é‡Š\n\ngit stash list \næŸ¥çœ‹å½“å‰stashä¸­çš„å†…å®¹\n\ngit stash pop\nå°†å½“å‰stashä¸­çš„å†…å®¹å¼¹å‡ºï¼Œå¹¶åº”ç”¨åˆ°å½“å‰åˆ†æ”¯å¯¹åº”çš„å·¥ä½œç›®å½•ä¸Šã€‚æ³¨ï¼šè¯¥å‘½ä»¤å°†å †æ ˆä¸­æœ€è¿‘ä¿å­˜çš„å†…å®¹åˆ é™¤ï¼ˆå…ˆè¿›åå‡ºï¼‰\n\ngit stash apply\nå°†å †æ ˆä¸­çš„å†…å®¹åº”ç”¨åˆ°å½“å‰ç›®å½•ï¼Œä¸åŒäºgit stash popï¼Œè¯¥å‘½ä»¤ä¸ä¼šå°†å†…å®¹ä»å †æ ˆä¸­åˆ é™¤ï¼Œä¹Ÿå°±è¯´è¯¥å‘½ä»¤èƒ½å¤Ÿå°†å †æ ˆçš„å†…å®¹å¤šæ¬¡åº”ç”¨åˆ°å·¥ä½œç›®å½•ä¸­ï¼Œé€‚åº”äºå¤šä¸ªåˆ†æ”¯çš„æƒ…å†µã€‚\n\ngit stash drop + åç§°\nä»å †æ ˆä¸­ç§»é™¤æŸä¸ªæŒ‡å®šçš„stash\n\ngit stash clear\næ¸…é™¤å †æ ˆä¸­çš„æ‰€æœ‰ å†…å®¹\n\ngit stash show\næŸ¥çœ‹å †æ ˆä¸­æœ€æ–°ä¿å­˜çš„stashå’Œå½“å‰ç›®å½•çš„å·®å¼‚\n\ngit stash branchä»æœ€æ–°çš„stashåˆ›å»ºåˆ†æ”¯ã€‚åº”ç”¨åœºæ™¯ï¼šå½“å‚¨è—äº†éƒ¨åˆ†å·¥ä½œï¼Œæš‚æ—¶ä¸å»ç†ä¼šï¼Œç»§ç»­åœ¨å½“å‰åˆ†æ”¯è¿›è¡Œå¼€å‘ï¼Œåç»­æƒ³å°†stashä¸­çš„å†…å®¹æ¢å¤åˆ°å½“å‰å·¥ä½œç›®å½•æ—¶ï¼Œå¦‚æœæ˜¯é’ˆå¯¹åŒä¸€ä¸ªæ–‡ä»¶çš„ä¿®æ”¹ï¼ˆå³ä¾¿ä¸æ˜¯åŒè¡Œæ•°æ®ï¼‰ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå‘ç”Ÿå†²çªï¼Œæ¢å¤å¤±è´¥ï¼Œè¿™é‡Œé€šè¿‡åˆ›å»ºæ–°çš„åˆ†æ”¯æ¥è§£å†³ã€‚å¯ä»¥ç”¨äºè§£å†³stashä¸­çš„å†…å®¹å’Œå½“å‰ç›®å½•çš„å†…å®¹å‘ç”Ÿå†²çªçš„æƒ…æ™¯ã€‚å‘ç”Ÿå†²çªæ—¶ï¼Œéœ€æ‰‹åŠ¨è§£å†³å†²çªã€‚\n\n\nå›æ»šæ“ä½œå›æ»šåœºæ™¯ï¼šä»…åœ¨å·¥ä½œåŒºä¿®æ”¹æ—¶å½“æ–‡ä»¶åœ¨å·¥ä½œåŒºä¿®æ”¹ï¼Œè¿˜æ²¡æœ‰æäº¤åˆ°æš‚å­˜åŒºå’Œæœ¬åœ°ä»“åº“æ—¶ï¼Œå¯ä»¥ç”¨ git checkout -- æ–‡ä»¶å æ¥å›æ»šè¿™éƒ¨åˆ†ä¿®æ”¹ã€‚ä¸è¿‡éœ€è¦ç‰¹åˆ«ç•™æ„çš„æ˜¯è¿™äº›æ”¹åŠ¨æ²¡æœ‰æäº¤åˆ° Git ä»“åº“ï¼ŒGit æ— æ³•è¿½è¸ªå…¶å†å²ï¼Œä¸€æ—¦å›æ»šå°±ç›´æ¥ä¸¢å¼ƒäº†ã€‚\nå›æ»šåœºæ™¯ï¼šå·²æ·»åŠ åˆ°æš‚å­˜åŒºæ—¶å³æ‰§è¡Œè¿‡ git add æ·»åŠ åˆ°æš‚å­˜åŒºï¼Œä½†è¿˜æ²¡ commitï¼Œè¿™æ—¶å¯ä»¥ç”¨ git reset HEAD æ–‡ä»¶å å›æ»šã€‚ å›æ»šåå·¥ä½œåŒºä¼šä¿ç•™è¯¥æ–‡ä»¶çš„æ”¹åŠ¨ï¼Œå¯é‡æ–°ç¼–è¾‘å†æäº¤ï¼Œæˆ–è€… git checkout -- æ–‡ä»¶å å½»åº•ä¸¢å¼ƒä¿®æ”¹ã€‚\nå›æ»šåœºæ™¯ï¼šå·² commitï¼Œä½†è¿˜æ²¡æœ‰ push æ—¶å³å·²ç»æäº¤åˆ°æœ¬åœ°ä»£ç åº“äº†ï¼Œä¸è¿‡è¿˜æ²¡æœ‰ push åˆ°è¿œç«¯ã€‚è¿™æ—¶å€™å¯ç”¨ git reset å‘½ä»¤ï¼Œå‘½ä»¤æ ¼å¼ä¸ºï¼š\ngit reset &lt;è¦å›æ»šåˆ°çš„ commit&gt;\ngit reset é»˜è®¤ä¼šå°†è¢«ä¸¢å¼ƒçš„è®°å½•æ‰€æ”¹åŠ¨çš„æ–‡ä»¶ä¿ç•™åœ¨å·¥ä½œåŒºä¸­ï¼Œä»¥ä¾¿é‡æ–°ç¼–è¾‘å’Œå†æäº¤ã€‚åŠ ä¸Š --hard é€‰é¡¹åˆ™ä¸ä¿ç•™è¿™éƒ¨åˆ†å†…å®¹ï¼Œéœ€è°¨æ…ä½¿ç”¨ã€‚\n\ngit reflog æŸ¥çœ‹æ“ä½œå†å²ï¼Œæ‰¾åˆ°ä¹‹å‰ HEAD çš„ hash å€¼ï¼Œç„¶å git reset --hard åˆ°é‚£ä¸ª hash å³å¯\nvscodeå¯è§†åŒ–gitæ’ä»¶ï¼š\ngitlens\n\n","slug":"gitå·¥ä½œæµç¨‹","date":"2021-08-07T08:57:12.000Z","categories_index":"git","tags_index":"git","author_index":"EVE"},{"id":"4671e4a4ddc838dd69dd6aa254700d36","title":"webpack5æ­å»ºvue3ç¯å¢ƒ","content":"ä½¿ç”¨webpack5æ­å»ºvue3ç¯å¢ƒå‰è¨€å¹³æ—¶é¡¹ç›®å¼€å‘ï¼Œä»ç¨³å®šæ€§å’Œæ˜“ç”¨æ€§çš„è§’åº¦ï¼Œä¸€èˆ¬å¾ˆå°‘ä»å¤´åˆ°å°¾æ­å»ºç¯å¢ƒï¼Œå¤§å¤šæ•°æ˜¯é‡‡ç”¨ä»¥ä¸‹çš„æ–¹æ³•ï¼š\n\nç”¨å®˜æ–¹è„šæ‰‹æ¶vue-cliå¿«é€Ÿæ­å»ºé¡¹ç›®\nåœ¨åˆ«äººæ­å»ºå¥½çš„é¡¹ç›®åŸºç¡€ä¸Šå¼€å‘\n\nè™½ç„¶èƒ½å¿«é€Ÿä¸Šæ‰‹ï¼Œä½†ä¸åˆ©ç”¨é¡¹ç›®æŠŠæ§èƒ½åŠ›çš„åŸ¹å…»ã€‚æ— è®ºæ˜¯ä»é¢è¯•çš„è§’åº¦è¿˜æ˜¯ä»é—®é¢˜æ’æŸ¥çš„è§’åº¦ï¼Œä¸äº†è§£åŸºç¡€çš„é…ç½®ï¼Œéƒ½æ˜¯ç™¾å®³æ— ä¸€åˆ©çš„ã€‚æœ¬æ–‡ä»æ­å»ºvue 3.xå¼€å‘ç¯å¢ƒå‡ºå‘ï¼Œå­¦ä¹ ä¸€ä¸‹webpack 5ã€‚\nåŸºæœ¬åˆå§‹åŒ–é¡¹ç›®å…ˆæŠ›å¼€vueï¼Œä½¿ç”¨webpackæ­å»ºä¸€ä¸ªåˆæ­¥çš„å·¥ç¨‹åŒ–é¡¹ç›®ã€‚é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåˆå§‹åŒ–é¡¹ç›®ï¼š\nmkdir vue3-webpack-demo\ncd vue3-webpack-demo\n\nnpm init -y // -yçœå»æ•²å›è½¦çš„æ­¥éª¤\n\nå¾—åˆ°ä¸€ä¸ªåªæœ‰ package.json æ–‡ä»¶çš„é¡¹ç›®ï¼Œæ¥ä¸‹æ¥å®‰è£… webpack å’Œ webpack-cliï¼š\nnpm install webpack webpack-cli -D\n\n\n\n\n\n\n\n\n\n\nwebpack-cli æ˜¯æ‰§è¡Œ webpack çš„å·¥å…·ã€‚4.x ç‰ˆæœ¬ä»¥åï¼Œå‰¥ç¦»å‡ºäº† webpack-cli ã€‚\nåœ¨æ ¹ç›®å½•ä¸‹æ·»åŠ srcæ–‡ä»¶å¤¹ï¼Œåœ¨srcå†…æ–°å»ºmain.jsï¼›åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºindex.htmlå’Œwebpack.config.js:\n\nwebpack.config.jsæ·»åŠ ä¸€äº›å†…å®¹ï¼š\nmodule.exports = &#123;\n  mode: \"development\", // ç¯å¢ƒï¼Œ \"production\" | \"development\" | \"none\"\n  entry: resolve(__dirname, './src/main.js'), // dirnameè¿”å›å½“å‰è·¯å¾„çš„ç»å¯¹è·¯å¾„\n  output: &#123;\n    path: resolve(__dirname, 'dist')\n  &#125;,\n  filename: 'bundle.js'\n&#125;\n\nentryæŒ‡ç¤ºwebpackæ„å»ºä¾èµ–çš„èµ·å§‹æ¨¡å—ï¼Œä»å…¥å£èµ·ç‚¹è¿›å…¥åï¼Œwebpackä¼šæ‰¾å‡ºæ‰€æœ‰ä¸å…¥å£èµ·ç‚¹ï¼ˆç›´æ¥æˆ–é—´æ¥ï¼‰çš„ä¾èµ–é¡¹è¿›è¡Œå¤„ç†ï¼Œæœ€åè¾“å‡ºåˆ°distæ–‡ä»¶å¤¹ä¸‹çš„bundle.jsæ–‡ä»¶ä¸­ã€‚\n\n\n\n\n\n\n\n\n\nä»¥ä¸Šåªæ˜¯æœ€ç®€åŒ–çš„é…ç½®ï¼Œå®é™…ä¸Šå…¥å£å¯ä»¥æœ‰å¤šä¸ªï¼Œoutputå±æ€§ä¹Ÿè¿˜æœ‰æ›´å¤šå¯é…ç½®çš„ç‰¹æ€§\nä¿®æ”¹ package.json çš„ scripts å±æ€§ï¼š\n\"scripts\": &#123; \n    \"dev\": \"webpack --config ./webpack.config.js\" \n&#125;\n\nå‘½ä»¤è¡Œé”®å…¥npm run dev:\n\næ‰“åŒ…æˆåŠŸï¼Œç›®å½•ä¸‹å¤šäº†distï¼š\n\næ·»åŠ htmlæ¨¡æ¿æ‰“åŒ…æˆåŠŸåï¼Œè¿˜éœ€è¦åœ¨htmlæ–‡ä»¶ä¸­å¼•å…¥æ‰“åŒ…å¥½çš„jsæ–‡ä»¶ï¼Œè¿™ä¸ªæ“ä½œå½“ç„¶ä¸èƒ½æ¯æ¬¡éƒ½ç”±æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨å¼•å…¥ã€‚\næ·»åŠ html-webpack-pluginæ’ä»¶ï¼š\nnpm install html-webpack-plugin -D\n\nå•æ–‡ä»¶å…¥å£ä¿®æ”¹webpack-config.js:\nconst &#123; resolve &#125; = require('path')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\nmodule.exports = &#123;\n  mode: 'development',\n  entry: resolve(__dirname, '../src/main.js'), // dirnameè¿”å›å½“å‰è·¯å¾„çš„ç»å¯¹è·¯å¾„\n  output: &#123;\n    path: resolve(__dirname, 'dist'),\n    filename: 'bundle.js'\n  &#125;,\n  plugins: [\n    new HtmlWebpackPlugin(&#123;\n      template: resolve(__dirname, '../public/index.html'), // è¦ä½¿ç”¨çš„htmlæ¨¡æ¿\n      filename: 'index.html' //æ‰“åŒ…åè¾“å‡ºçš„æ–‡ä»¶å\n    &#125;)\n  ]\n&#125;\n\né‡æ–°è¿è¡Œå‘½ä»¤æ‰“åŒ…ï¼Œç”Ÿæˆäº†ä¸€ä¸ªhtmlæ–‡ä»¶ï¼š\n\n\n\n\n\n\n\n\n\n\n html-webpack-plugin æ’ä»¶è¯¦ç»†çš„é…ç½®é¡¹è§è¯· Githubå®˜ç½‘ ã€‚\nå¤šå…¥å£æ–‡ä»¶å¾ˆå¤šå•é¡µé¢é¡¹ç›®éƒ½åªæœ‰ä¸€ä¸ªindex.htmlä½œä¸ºæ¨¡æ¿å…¥å£ï¼Œä½†æœ‰æ—¶å€™ä¹Ÿéœ€è¦å¤šä¸ªå…¥å£æ–‡ä»¶ï¼Œè¿™æ—¶å€™å°±å¯ä»¥é€šè¿‡ç”Ÿæˆå¤šä¸ªhtml-webpack-pluginå®ä¾‹å®ç°ã€‚\nconst path = require('path');\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\nmodule.exports = &#123;\n    mode:'development', \n    entry: &#123;\n    \tmain:path.resolve(__dirname,'../src/main.js'),\n      header:path.resolve(__dirname,'../src/header.js')\n  \t&#125;, \n    output: &#123;\n      filename: '[name].[hash:8].js',      // æ‰“åŒ…åçš„æ–‡ä»¶åç§°\n      path: path.resolve(__dirname,'../dist')  // æ‰“åŒ…åçš„ç›®å½•\n    &#125;,\n    plugins:[\n      new HtmlWebpackPlugin(&#123;\n        template:path.resolve(__dirname,'../public/index.html'),\n        filename:'index.html',\n        chunks:['main'] // ä¸å…¥å£æ–‡ä»¶å¯¹åº”çš„æ¨¡å—å\n      &#125;),\n      new HtmlWebpackPlugin(&#123;\n        template:path.resolve(__dirname,'../public/header.html'),\n        filename:'header.html',\n        chunks:['header'] // ä¸å…¥å£æ–‡ä»¶å¯¹åº”çš„æ¨¡å—å\n      &#125;),\t\t\t\t\n    ]\n&#125;\n\nå†æ¬¡è¿è¡Œæ‰“åŒ…å‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°é¡¹ç›®æœ‰äº†å¤šä¸ªhtmlæ¨¡æ¿ï¼š\n\næ¸…é™¤æ‰“åŒ…æ®‹ç•™é¡¹æ¯æ¬¡æ‰§è¡Œnpm run devï¼Œdistæ–‡ä»¶å¤¹é‡Œéƒ½ä¼šæ®‹ç•™ä¸Šæ¬¡æ‰“åŒ…çš„æ–‡ä»¶\n\nä½¿ç”¨clean-webpack-pluginè¿›è¡Œæ¸…é™¤ï¼š\nconst &#123;CleanWebpackPlugin&#125; = require('clean-webpack-plugin')\nmodule.exports = &#123;\n    // ...çœç•¥å…¶ä»–é…ç½®\n    plugins:[new CleanWebpackPlugin()]\n&#125;\n\nè§£æcssåŸºæœ¬çš„cssç›®å‰ä¸ºæ­¢é¡¹ç›®çš„å…¥å£æ–‡ä»¶éƒ½æ˜¯index.jsï¼Œæˆ‘ä»¬åœ¨é‡Œé¢å¼•å…¥cssæ–‡ä»¶\n// index.js// ...import './assets/index.scss'\n\nè§£æcssç”¨åˆ°çš„ä¸¤ä¸ªloaderæ˜¯style-loaderå’Œcss-loader\nnpn i -D style-loader css-loader\n\nä½¿ç”¨é¢„å¤„ç†å™¨è¿™é‡Œä½¿ç”¨äº†scssé¢„å¤„ç†å™¨ï¼Œè¿˜éœ€è¦å®‰è£…sasså’Œsass-oader\nnpm i -D sass sass-loader node-sass\n\n// webpack.config.js\nmodule.exports = &#123;    \n  // ...    \n  module:&#123;      \n    rules:[     \n      &#123;        \n        test:/\\.css$/,  \n        use:['style-loader','css-loader'] // ä»å³å‘å·¦è§£æåŸåˆ™    \n      &#125;,        \n      &#123;         \n        test:/\\.s[ca]ss$/,       \n       \tuse:['style-loader','css-loader','sass-loader'] // ä»å³å‘å·¦è§£æåŸåˆ™    \n      &#125;      \n    ]    \n  &#125;&#125; \n\næ·»åŠ æµè§ˆå™¨å‰ç¼€å½“ä¸€ä¸ªæ–°çš„csså±æ€§è¿˜æœªæˆä¸ºæ ‡å‡†æ—¶ï¼Œæµè§ˆå™¨å‚å•†ä»¬æœ‰æ—¶ä¼šç»™è¿™äº›å±æ€§æ·»åŠ è‡ªå®¶çš„ç§æœ‰å‰ç¼€ï¼Œå…è®¸å¼€å‘è€…ä½¿ç”¨è¿™äº›æ–°çš„ç‰¹æ€§è¿›è¡Œè¯•éªŒï¼ŒåŒæ—¶é˜²æ­¢ä»–ä»¬çš„è¯•éªŒä»£ç è¢«ä¾èµ–ï¼Œåœ¨æ ‡å‡†åŒ–è¿‡ç¨‹ä¸­ç ´åwebå¼€å‘è€…çš„ä»£ç ã€‚ï¼ˆw3cåˆ¶å®šæ ‡å‡†æ˜¯å¾ˆæ…¢çš„ï¼Œè€Œæµè§ˆå™¨å‚å•†å¸‚åœºæ¨å¹¿æ—¶é—´ç´§ï¼‰ã€‚\u0003\n-webkit-transition: all 4s ease; &#x2F;&#x2F; è°·æ­Œï¼ŒSafariï¼Œæ–°ç‰ˆOperaï¼Œä»¥åŠå‡ ä¹æ‰€æœ‰iOSç³»ç»Ÿä¸­çš„æµè§ˆå™¨ï¼ˆåŒ…æ‹¬iOSçš„ç«ç‹æµè§ˆå™¨ï¼›åŸºæœ¬ä¸Šæ‰€æœ‰åŸºäºWebkitå†…æ ¸çš„æµè§ˆå™¨ï¼‰-moz-transition: all 4s ease; &#x2F;&#x2F; ç«ç‹-ms-transition: all 4s ease; &#x2F;&#x2F; IEå’ŒEdge-o-transition: all 4s ease; &#x2F;&#x2F; æ—§ç‰ˆOperatransition: all 4s ease; \n\n\n\n\n\n\n\n\n\n\nä¸Šé¢ä»£ç ç¤ºä¾‹çš„æ˜¯ä¸€äº›æ¯”è¾ƒè€çš„ç‰ˆæœ¬æµè§ˆå™¨å†…æ ¸ï¼Œå®é™…ä¸Šç°åœ¨æœ‰å¾ˆå¤šå·²ç»å‘ç”Ÿäº†å˜åŒ–\nä½¿ç”¨postcss-loaderå’Œautoprefixeræ·»åŠ å‰ç¼€ï¼š\nnpm i -D postcss-loader autoprefixer\n\n// webpack.config.js\nmodule.exports = &#123;\t\n  // ...    \n  module:&#123;   \n    rules:[ \n      &#123;    \n        test:/\\.s[ac]ss$/,     \n        use:['style-loader','css-loader','postcss-loader','sass-loader'] // ä»å³å‘å·¦è§£æåŸåˆ™           \n      &#125;        \n    ]    \n &#125;&#125; \n\nè¿˜éœ€è¦å¼•å…¥autoprefixeræ‰èƒ½ç”Ÿæ•ˆï¼Œä¸¤ç§æ–¹å¼ï¼š\n\nåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºpostcss.config.js:\n// postcss.config.js\nmodule.exports = &#123;\t\n  plugins: [require('autoprefixer')]\n&#125;\nåœ¨webpack.config.jsé‡Œé¢é…ç½®ï¼š\n// webpack.config.js\nmodule.exports = &#123;\n  //...çœç•¥å…¶ä»–é…ç½®   \n  module:&#123;        \n    rules:[\n      &#123;   \n      \ttest:/\\.s[ca]ss$/,   \n        use:['style-loader','css-loader',\n             &#123;                \n               \tloader:'postcss-loader',\n              \toptions:&#123;            \n                  plugins:[require('autoprefixer')]     \n              \t&#125;            \n             &#125;,'sass-loader'\n            ] // ä»å³å‘å·¦è§£æåŸåˆ™    \n      &#125;]    \n  &#125;\n&#125;\n\né‡æ–°æ‰“åŒ…è¿è¡Œï¼Œå‘ç°å¹¶æ²¡æœ‰æˆåŠŸæ·»åŠ ä¸Šå‰ç¼€ï¼š\n\nå…¶å®å¾ˆç®€å•ï¼Œautoprefixeræ’ä»¶æ˜¯é€šè¿‡è¯†åˆ«browserslistä¸­æŒ‡å®šçš„æµè§ˆå™¨æ¥æ·»åŠ å‰ç¼€çš„ï¼Œè€Œé¡¹ç›®ä¸­æš‚æ—¶è¿˜æ²¡æœ‰browserslist\nè§£å†³æ–¹å¼ï¼š\n\nåœ¨package.jsonä¸­æ·»åŠ ï¼š\n// package.json&#123;\nbrowserslist: [\t\n  \"> 1%\",\t\t\n  \"last 2 versions\",\t\n  \"not ie &lt; 10\"\t]\n&#125;\næ ¹ç›®å½•ä¸‹æ·»åŠ .browserslist:\n&#x2F;&#x2F; .browserslist\n&gt; 1%\nlast 2 versionsnot \nie &lt;&#x3D; 10\n\nå†æ¬¡å°è¯•ï¼Œé—®é¢˜è§£å†³\n\n\n\n\n\n\n\n\n\n\nå‚è€ƒé“¾æ¥ï¼šhttps://github.com/postcss/autoprefixer\næ‹†åˆ†cssä¸Šè¿°æ‰“åŒ…åçš„cssä»£ç éƒ½å†…åµŒåœ¨htmlæ–‡ä»¶çš„styleä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ’ä»¶å°†cssä»£ç æ‹†åˆ†å‡ºæ¥ä»¥å¤–é“¾çš„å½¢å¼å¼•å…¥\nnpm i -D mini-css-extract-plugin\n\n\n\n\n\n\n\n\n\n\nwebpack 4ä¹‹å‰ï¼Œä½¿ç”¨çš„æ˜¯extract-text-webpack-pluginï¼Œ4ä¹‹åï¼Œå®˜æ–¹æ¨èä½¿ç”¨mini-css-extract-pluginæ’ä»¶æ¥æ‰“åŒ…cssæ–‡ä»¶ï¼Œå…³äºä¸¤è€…çš„æ¯”è¾ƒå¯æŸ¥é˜…mini-css-extract-plugin\nconst MiniCssExtractPlugin = require(\"mini-css-extract-plugin\");\nmodule.exports = &#123; \n  //...çœç•¥å…¶ä»–é…ç½® \n  module: &#123;  \n    rules: [  \n      &#123;      \n        test: /\\.s[ac]ss$/,  \n        use: [  \n          MiniCssExtractPlugin.loader,  \n          \"style-loader\",  \n          'css-loader',  \n          'sass-loader'  \n        ],      \n      &#125;    \n    ]  \n  &#125;,  \n  plugins: [ \n    new MiniCssExtractPlugin(\n      &#123;      \n        filename: \"[name].[hash:8].css\", \n        chunkFilename: \"[id].css\",   \n      &#125;\n    )  \n  ]\n&#125;\n\næ‰“åŒ…è¿‡ç¨‹ä¸­æŠ›äº†ä¸ªé”™ï¼ŒåŸå› æ˜¯style-loaderä¼šä¸å…¶ä»–è¯•å›¾åˆ†ç¦»cssä¸ºå¤–é“¾æ–‡ä»¶çš„æ’ä»¶äº§ç”Ÿå†²çªï¼Œè¿™ä¹Ÿå¥½ç†è§£ï¼Œå› ä¸ºstyle-loaderçš„ä½œç”¨æ˜¯æŠŠcssæ·»åŠ åˆ°htmlå¤´éƒ¨çš„&lt;style&gt;&lt;/style&gt;é‡Œé¢\n\nè§£å†³æ–¹æ³•ï¼šç§»é™¤style-loaderå³å¯\n\n\n\n\n\n\n\n\n\n\nå‚è€ƒé“¾æ¥ï¼šhttps://flutterq.com/module-build-failed-from-node_modules-mini-css-extract-plugin-dist-loader-js-referenceerror-document-is-not-defined/\næ‹†åˆ†å¤šä¸ªcssä¸Šé¢ç”¨åˆ°çš„mini-css-extract-pluginä¼šå°†æ‰€æœ‰çš„cssæ ·å¼åˆå¹¶ä¸ºä¸€ä¸ªcssæ–‡ä»¶ã€‚å¦‚æœä½ æƒ³æ‹†åˆ†ä¸ºä¸€ä¸€å¯¹åº”çš„å¤šä¸ªcssæ–‡ä»¶,æˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ°extract-text-webpack-pluginï¼Œè€Œç›®å‰mini-css-extract-pluginè¿˜ä¸æ”¯æŒæ­¤åŠŸèƒ½ã€‚éœ€è¦å®‰è£…@nextç‰ˆæœ¬çš„extract-text-webpack-pluginï¼Œä¹‹åç”¨åˆ°çš„æ—¶å€™å†æ¥è¡¥å……å§\né…ç½®babelECMAScriptæ–°ç‰¹æ€§ç”¨èµ·æ¥å¾ˆçˆ½ï¼Œä½†æœ‰äº›æµè§ˆé‡ååå°±ä¸æ”¯æŒï¼ˆæŒ‡åé“å§“IEï¼‰ï¼Œæ‰€ä»¥å°±éœ€è¦ä½¿ç”¨babelè¿›è¡Œä»£ç ç¼–è¯‘ï¼Œè½¬åŒ–æˆå‘ä¸‹å…¼å®¹çš„ECMAScriptç‰ˆæœ¬\nè¯­æ³•è½¬æ¢å®‰è£…ä¸€ä¸‹babelçš„å‡ ä¸ªä¾èµ–ï¼š\nnpm install -D @babel/core @babel/preset-env babel-loader\n\n\n@babel/coreï¼š babel çš„æ ¸å¿ƒåº“\n@babel/preset-envï¼šå–ä»£äº† es2015 es2016 es2017 ï¼Œé€šè¿‡é…ç½®æµè§ˆå™¨ç‰ˆæœ¬çš„å½¢å¼ï¼Œå°†ç¼–è¯‘çš„ä¸»åŠ¨æƒï¼Œäº¤ç»™äº†æ’ä»¶\nbabel-loaderï¼š webpack çš„ loader æ’ä»¶ï¼Œç”¨äºç¼–è¯‘ä»£ç ï¼Œè½¬åŒ–æˆæµè§ˆå™¨è¯»å¾—æ‡‚çš„ä»£ç \n\n\n\n\n\n\n\n\n\n\næ³¨æ„ babel-loaderä¸babel-coreçš„ç‰ˆæœ¬å¯¹åº”å…³ç³»\n\nbabel-loader 8.x å¯¹åº”babel-core 7.x\nbabel-loader 7.x å¯¹åº”babel-core 6.x\n\nå®‰è£…å®Œæˆï¼Œwebpack.config.jsæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š\nmodule: &#123;    \n  rules: [  \n    &#123;        \n      test: /\\.js$/,  \n      exclude: '/node_modules', // å¿½ç•¥ä¾èµ–  \n      loader: 'babel-loader', \n      options: &#123;        \n        presets: ['@babel/preset-env']  \n      &#125;      \n    &#125;    \n  ]\n&#125;,\n\nAPIè½¬æ¢ä¸Šé¢çš„babel-laoderåªä¼šå°†ES6/7/8è¯­æ³•è½¬æ¢ä¸ºES5è¯­æ³•ï¼Œå¹¶ä¸ä¼šå¤„ç†æ–°çš„APIè½¬æ¢ï¼Œå¦‚Promiseï¼ŒGeneratorï¼ŒSetï¼ŒMapï¼ŒProxyç­‰ç­‰ï¼Œéœ€å€ŸåŠ©babel-polyfill\nnpm i -D @babel/polyfill\n\nè¿™ä¸ªæ—¶å€™ï¼Œå†å»çœ‹æ‰“åŒ…åçš„bundle.jsæ–‡ä»¶ï¼Œä¼šå‘ç°è¡Œæ•°å˜å¾—æ›´å¤šäº†ï¼Œè¯æ˜æ·»åŠ äº†polyfillä¹‹åç¡®å®å¯¹APIè¿›è¡Œäº†è½¬æ¢        \nè§£æèµ„æºæ¨¡å—èµ„æºæ¨¡å—èµ„æºæ¨¡å—(asset module)æ˜¯ä¸€ç§æ¨¡å—ç±»å‹ï¼Œå®ƒå…è®¸ä½¿ç”¨èµ„æºæ–‡ä»¶ï¼ˆå­—ä½“ï¼Œå›¾æ ‡ç­‰ï¼‰è€Œæ— éœ€é…ç½®é¢å¤– loaderã€‚\nåœ¨webpack5ä¹‹å‰ï¼Œé€šå¸¸ä½¿ç”¨ï¼š\n\nraw-loader å°†æ–‡ä»¶å¯¼å…¥ä¸ºå­—ç¬¦ä¸²\nurl-loader å°†æ–‡ä»¶ä½œä¸º data URI å†…è”åˆ° bundle ä¸­\nfile-loader å°†æ–‡ä»¶å‘é€åˆ°è¾“å‡ºç›®å½•\n\nèµ„æºæ¨¡å—ç±»å‹(asset module type)ï¼Œé€šè¿‡æ·»åŠ  4 ç§æ–°çš„æ¨¡å—ç±»å‹ï¼Œæ¥æ›¿æ¢æ‰€æœ‰è¿™äº› loaderï¼š\n\nasset/resource å‘é€ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å¹¶å¯¼å‡º URLã€‚ä¹‹å‰é€šè¿‡ä½¿ç”¨ file-loader å®ç°ã€‚\nasset/inline å¯¼å‡ºä¸€ä¸ªèµ„æºçš„ data URIã€‚ä¹‹å‰é€šè¿‡ä½¿ç”¨ url-loader å®ç°ã€‚\nasset/source å¯¼å‡ºèµ„æºçš„æºä»£ç ã€‚ä¹‹å‰é€šè¿‡ä½¿ç”¨ raw-loader å®ç°ã€‚\nasset åœ¨å¯¼å‡ºä¸€ä¸ª data URI å’Œå‘é€ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¹‹é—´è‡ªåŠ¨é€‰æ‹©ã€‚ä¹‹å‰é€šè¿‡ä½¿ç”¨ url-loaderï¼Œå¹¶ä¸”é…ç½®èµ„æºä½“ç§¯é™åˆ¶å®ç°ã€‚\n\n// webpack.config.js\nmodule.exports = &#123;\n\t\t....\n    module:&#123;        \n      rules:[\n  \t\t....\n        &#123;\n          test: /\\.(png|svg|jpg|jpeg|gif)$/i,\n          include: path.resolve(__dirname, \"../src/assets\"),\n          type: \"asset/resource\"  \n        &#125;,\n      ]    \n    &#125;\n&#125;\n\næ‰€æœ‰å¼•å…¥çš„ .png æ–‡ä»¶éƒ½å°†è¢«å‘é€åˆ°è¾“å‡ºç›®å½•ï¼Œå¹¶ä¸”å…¶è·¯å¾„å°†è¢«æ³¨å…¥åˆ° bundle ä¸­ã€‚\n// main.js\nimport mainImage from './images/main.png';\n\nimg.src = mainImage; // '/dist/151cfcfa1bd74779aadb.png'\n\nè‡ªå®šä¹‰è¾“å‡ºæ–‡ä»¶åé»˜è®¤æƒ…å†µä¸‹ï¼Œasset/resource æ¨¡å—ä»¥ [hash][ext][query] æ–‡ä»¶åå‘é€åˆ°è¾“å‡ºç›®å½•ã€‚\nå¯ä»¥é€šè¿‡åœ¨ webpack é…ç½®ä¸­è®¾ç½® output.assetModuleFilename æ¥ä¿®æ”¹æ­¤æ¨¡æ¿å­—ç¬¦ä¸²ï¼š\n// webpack.config.js\nmodule.exports = &#123;\n\t\t....\n    output: &#123;\n      filename: 'js/[name].[hash:8].js',      // æ‰“åŒ…åçš„æ–‡ä»¶åç§°\n      path: path.resolve(__dirname,'../dist'),  // æ‰“åŒ…åçš„ç›®å½•\n      assetModuleFilename: 'images/[hash][ext][query]',\n    &#125;,\n &#125;\n\nå¦ä¸€ç§è‡ªå®šä¹‰è¾“å‡ºæ–‡ä»¶åçš„æ–¹å¼æ˜¯ï¼Œå°†æŸäº›èµ„æºå‘é€åˆ°æŒ‡å®šç›®å½•ï¼š\nconst path = require('path');\nmodule.exports = &#123;\n  module: &#123;\n    rules: [\n        &#123;\n          test: /\\.(png|svg|jpg|jpeg|gif)$/i,\n          include: path.resolve(__dirname, \"../src/assets\"),\n          type: \"asset/resource\"  \n          generator: &#123;\n          \tfilename: 'static/[hash][ext][query]'\n        \t&#125;\n        &#125;\n    ]\n  &#125;,\n&#125;;\n\nä½¿ç”¨æ­¤é…ç½®ï¼Œæ‰€æœ‰ html æ–‡ä»¶éƒ½å°†è¢«å‘é€åˆ°è¾“å‡ºç›®å½•ä¸­çš„ static ç›®å½•ä¸­ã€‚\né€šç”¨èµ„æºç±»å‹æŒ‰ç…§é»˜è®¤æ¡ä»¶ï¼Œè‡ªåŠ¨åœ°åœ¨ resource å’Œ inline ä¹‹é—´è¿›è¡Œé€‰æ‹©ï¼šå°äº 8kb çš„æ–‡ä»¶ï¼Œå°†ä¼šè§†ä¸º inline æ¨¡å—ç±»å‹ï¼Œå¦åˆ™ä¼šè¢«è§†ä¸º resource æ¨¡å—ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šã€‚\n// webpack.config.js\nconst path = require('path');\n\nmodule.exports = &#123;\n\t....\n  module: &#123;\n    rules: [\n      &#123;\n        test: /\\.(png|svg|jpg|jpeg|gif)$/i,\n        include: path.resolve(__dirname, \"../src/assets\"),\n        type: 'asset',\n        generator: &#123;\n           filename: 'static/[hash][ext][query]'\n        &#125;\n        parser: &#123;\n          dataUrlCondition: &#123;\n            maxSize: 4 * 1024 // 4kb\n         &#125;\n      &#125;\n    ]\n  &#125;\n&#125;;\n\né…ç½®devServerä½¿ç”¨vue-cliå¼€å‘çš„æ—¶å€™ï¼Œåªè¦ä»£ç ä¸€ä¿å­˜ï¼Œå°±ä¼šé‡æ–°æ‰“åŒ…æ„å»ºï¼Œè‡ªåŠ¨åˆ·æ–°é¡µé¢ï¼Œä½¿ç”¨çš„å°±æ˜¯webpack-dev-serve\nnpm install webpack-dev-server -D\n\nåœ¨ webpack.config.js ä¸‹æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š\ndevServer: &#123;    \n  contentBase: resolve(__dirname, './dist'),\n  port: 8080,   \n  publicPath: '/'  \n&#125;\n\nä¿®æ”¹ package.json è¿è¡Œè„šæœ¬ï¼š\n\"scripts\": &#123;\t\"dev\": \"webpack serve --progress --config ./webpack.config.js --open\"&#125;\n\n\n\n\n\n\n\n\n\n\nwebpack-cli4ä¹‹å‰ï¼Œä½¿ç”¨çš„æ˜¯webpack-dev-server\né‡æ–°æ‰“åŒ…è¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°æ­¤æ—¶é™æ€èµ„æºbundle.jsè¿è¡Œåœ¨æµè§ˆå™¨çš„å†…å­˜é‡Œï¼Œå¯ä»¥è¿›è¡Œçƒ­æ›´æ–°ï¼š\n\nwebpack5å’Œwebpack-cli4ç¯å¢ƒä¸‹ï¼Œå½“package.jsonå­˜åœ¨browserslistæ—¶ï¼Œçƒ­æ›´æ–°ä¼šå¤±æ•ˆ\nè¿™æ˜¯å› ä¸ºwebpack5é»˜è®¤çš„targetæ˜¯webæˆ–browserslistï¼Œå–å†³äºæ˜¯å¦æœ‰browserslisté…ç½®é¡¹ï¼Œè€Œåªæœ‰ä¸ºwebHMRæ‰æœ‰æ•ˆã€‚\nè¿™å…¶å®æ˜¯webpack-dev-serveré—ç•™çš„ä¸€ä¸ªbugï¼Œé€šè¿‡å‡çº§webpack-dev-serverå€¼nextç‰ˆæœ¬ï¼Œå³å¯¹æ¥webpack5çš„v4ç‰ˆæœ¬ï¼Œä¹Ÿèƒ½è§£å†³é—®é¢˜ã€‚\n\n\n\n\n\n\n\n\n\n\nå‚è€ƒé“¾æ¥ï¼š\n\nhttps://webpack.js.org/configuration/target/#target\n\nhttps://github.com/webpack/webpack-dev-server/issues/2758\n\nwebpack-dev-server\n\n\né›†æˆtypescriptvue3çš„æºç ä¹Ÿæ˜¯ç”¨typescriptè¿›è¡Œé‡å†™çš„ï¼Œæ— è®ºæ˜¯ä»£ç æç¤ºè¿˜æ˜¯é¡¹ç›®è´´åˆï¼Œéƒ½æ˜¯å¼•å…¥tsçš„å¾ˆå¥½çš„ç†ç”±ã€‚\nå®‰è£…ä¾èµ–npm install typescript ts-loader -D\n\nä¿®æ”¹webpack.config.js// webpack.config.js\nmodule.exports = &#123;\n  // ...\t\n  modules: &#123;\t\n    // ...    \n    test: /\\.ts$/, \n    use: [&#123;   \n      loader: 'ts-loader',  \n      options: &#123;  \n        appendTsSuffixTo: [/.vue$/]    \n      &#125;    \n    &#125;]\t\n  &#125;,&#125;\n\nåˆå§‹åŒ–tsconfig.jsontsc --init\n\nvueç¯å¢ƒè¯†åˆ«.vueæ–‡ä»¶ä¸€ä¸ª.vueæ–‡ä»¶é€šå¸¸åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼štemplateï¼Œscriptå’Œstyleï¼Œvue-loaderèƒ½å°†.vueæ–‡ä»¶åˆ†å‰²æˆè¿™ä¸‰ä¸ªéƒ¨åˆ†ï¼Œtemplateéƒ¨åˆ†å°±é€šè¿‡compilerå¤„ç†æˆrenderå’ŒstaticRenderFns\n\nå®‰è£…ä¾èµ–\n\nnpm install vue@next -Snpm install vue-loader@next @vue/compiler-sfc\n\n\n\n\n\n\n\n\n\n\nvue2.x å®‰è£…çš„æ˜¯vue-loaderå’Œvue-template-compiler\n\nä¿®æ”¹webpack.config.js:\n\nconst &#123; VueLoaderPlugin &#125; = require('vue-loader/dist/index');\nmodule.exports = &#123;  \n  // ...   \n  module: &#123;    \n    rules: [    \n      &#123;             \n        test: /\\.vue$/,  \n        use: [                \n          'vue-loader'                \n        ]            \n      &#125;        \n    ]    \n  &#125;,    \n  plugins: [ \n    new VueLoaderPlugin()  \n  ]\n&#125;\n\n\næ–°å¢App.vueæ–‡ä»¶\n\n// App.vue\n&lt;template>   \n  &lt;div>      \t\n    &#123;&#123;message&#125;&#125;   \n  &lt;/div>\n&lt;/template>\n&lt;script lang=\"ts\">\n import &#123; defineComponent, ref &#125; from 'vue';\nexport default defineComponent(&#123; \n  setup() &#123;     \n    const message = ref('hello, vue3') \n    return &#123;      \n      message   \n    &#125;    \n  &#125;\n&#125;)\n&lt;/script>\n\n\nindex.jsä¸­å¼•å…¥Vue\n\n&#x2F;&#x2F; index.js\nimport &#123; createApp &#125; from &#39;vue&#39;;\nimport App from &#39;.&#x2F;App.vue&#39;;\ncreateApp(App).mount(&#39;#app&#39;)\n\n\n\n\n\n\n\n\n\n\nä½¿ç”¨defineComponent å¯ä»¥åœ¨ä½¿ç”¨ Vue3 çš„æ—¶å€™è·å¾—æ›´å¥½çš„è¯­æ³•æç¤º\n\n\nhttps://github.com/vuejs/vue-next-webpack-preview/issues/5\né…ç½®ESLint\nä¾èµ–å®‰è£…\nå®‰è£…eslint\nå¯ä»¥å…¨å±€å®‰è£…ï¼Œä¹Ÿå¯ä»¥åªåœ¨å½“å‰é¡¹ç›®å®‰è£…ï¼Œè¿™é‡Œé€‰æ‹©å½“å‰\nnpm i -d eslint\nå®‰è£…è§£æå™¨\neslinté»˜è®¤ä½¿ç”¨Espreeä½œä¸ºå…¶è§£æå™¨ï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šä¸€ä¸ªä¸åŒçš„è§£æå™¨ï¼Œä»¥ä¸‹è§£æå™¨ä¸eslintå…¼å®¹ï¼š\n\nEsprima\nBabel-ESLint - ä¸€ä¸ªå¯¹Babelè§£æå™¨çš„åŒ…è£…ï¼Œä½¿å…¶èƒ½å¤Ÿä¸ ESLint å…¼å®¹ã€‚\n@typescript-eslint/parser - å°† TypeScript è½¬æ¢æˆä¸ estree å…¼å®¹çš„å½¢å¼ï¼Œä»¥ä¾¿åœ¨ESLintä¸­ä½¿ç”¨ã€‚\n\né¡¹ç›®ä¸­ç”¨åˆ°äº†typescriptå’Œvueï¼Œéœ€è¦å®‰è£…@typescript-eslint/parserå’Œeslint-plugin-vue\nnpm i -D @typescript-eslint/parser\nå®‰è£…æ‰©å±•è§„åˆ™\nå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ç»§æ‰¿å·²å¯ç”¨çš„è§„åˆ™ï¼Œè¾¾åˆ°æ‰©å±•çš„ç›®çš„ï¼Œè¿™é‡Œéœ€è¦å®‰è£…@typescript-eslint/eslint-pluginå’Œeslint-plugin-vueä¸¤ä¸ªæ’ä»¶ï¼Œå®ƒä»¬æä¾›äº†ä¸€äº›é¢„è®¾è§„åˆ™\nnpm i -D @typescript-eslint/eslint-plugin eslint-plugin-vue\n\né…ç½®æ–‡ä»¶è¯¦è§£\né¡¹ç›®ç›®å½•ä¸‹æ–°å»º.eslintrc.jsï¼Œä»£ç æ£€æŸ¥çš„è§„åˆ™éƒ½åœ¨è¿™é‡Œé¢é…ç½®\n// .eslintrc.jsmodule.exports = &#123;\t\t&#125;\t\næ·»åŠ è§£æå™¨\n// .eslintrc.jsmodule.exports = &#123;\t\tparser: 'vue-eslint-parset',\t\tparserOptions: &#123;        parser: '@typescript-eslint/parser',        ecmaVersion: 12,        sourceType: 'module',    &#125;,&#125;\t\n\nç”±äºè§£æå™¨åªæœ‰ä¸€ä¸ªï¼Œç”¨äº†ã€Œvue-eslint-parserã€å°±ä¸èƒ½ç”¨ã€Œ@typescript-eslint/parserã€ã€‚è§£å†³æ–¹æ³•æ˜¯ï¼Œåœ¨è§£æå™¨é€‰é¡¹ä¸­ï¼Œå†ä¼ å…¥ä¸€ä¸ªè§£æå™¨é€‰é¡¹parserã€‚ä»è€Œåœ¨å†…éƒ¨å¤„ç†ã€Œ@typescript-eslint/parserã€ï¼Œæ£€æµ‹&lt;script&gt;ä¸­çš„tsä»£ç \n\necmaVersionï¼š æŒ‡å®šä½ æƒ³è¦ä½¿ç”¨çš„ ECMAScript ç‰ˆæœ¬ï¼Œé»˜è®¤ä¸º5ã€‚ä¹Ÿå¯ä»¥ç”¨ä½¿ç”¨å¹´ä»½å‘½åçš„ç‰ˆæœ¬å·æŒ‡å®šä¸º 2015ï¼ˆåŒ 6ï¼‰ç­‰\nsourceTypeï¼šè®¾ç½®ä¸º â€œscriptâ€œ (é»˜è®¤) æˆ– â€œmoduleâ€œï¼ˆå¦‚æœä»£ç æ˜¯ ECMAScript æ¨¡å—)\n\n\n\n\n\n\n\n\n\n\nè¯¦ç»†é…ç½®å‚è€ƒå®˜ç½‘ï¼šhttps://cn.eslint.org/docs/user-guide/configuring#specifying-processor\n\næ·»åŠ é¢„è®¾è§„åˆ™\n// .eslintrc.jsmodule.exports = &#123;\t // ...\t extends: [      // add more generic rulesets here, such as:      // 'eslint:recommended',      'plugin:vue/vue3-recommended',      'plugin:@typescript-eslint/recommended',    ],&#125;\t\né…ç½®å…¨å±€å˜é‡\næ·»åŠ eslint åï¼Œä¸€äº›å…¨å±€å¯¹è±¡ä¼šæŠ¥é”™ï¼Œä¿®æ”¹.eslintrc.js\nmodule.exports = &#123;\t\t// ...    \"globals\": &#123;        document: true,        window: true    &#125;,&#125;;\næ·»åŠ å¯ç”¨çš„è§„åˆ™å’Œé”™è¯¯çº§åˆ«\néµå¾ªã€â€è§„åˆ™åâ€: [è§„åˆ™å€¼, è§„åˆ™é…ç½®]ã€‘çš„æ ¼å¼\n\nâ€œoffâ€ æˆ– 0 - å…³é—­è§„åˆ™\nâ€œwarnâ€ æˆ– 1 - å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨è­¦å‘Šçº§åˆ«çš„é”™è¯¯ï¼šwarn (ä¸ä¼šå¯¼è‡´ç¨‹åºé€€å‡º)\nâ€œerrorâ€ æˆ– 2 - å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨é”™è¯¯çº§åˆ«çš„é”™è¯¯ï¼šerror (å½“è¢«è§¦å‘çš„æ—¶å€™ï¼Œç¨‹åºä¼šé€€å‡º)\n\nmodule.exports = &#123;\t\t// ...    \"rules\": &#123;        \"semi\": 2    &#125;,&#125;;\n\nvs code ä»£ç ä¿å­˜è‡ªåŠ¨ä¿®æ­£\nå®‰è£…eslintæ’ä»¶ \n\n\nä¿®æ”¹settings.json\n// settings.json&#123;   \n// ...  \n\"eslint.validate\": [ \n  // eslintæ‰§è¡Œæ ¡éªŒçš„æ–‡ä»¶æ ¼å¼    \n  \"javascript\",    \"javascriptreact\",    \"typescript\",    \"html\",    \"vue\"   ],   \t\"editor.codeActionsOnSave\": &#123;\n    // ä¿å­˜è‡ªåŠ¨æŒ‰ç…§.eslintrc.jsçš„è§„åˆ™è¿›è¡Œä»£ç æ ¡éªŒ   \t\t\n    \"source.fixAll.eslint\": true,   \n  &#125;,  // ... &#125;\n\nå®Œæˆäº†ä»¥ä¸Šçš„é…ç½®ï¼Œçœ‹ä¸‹æ•ˆæœï¼š\n\nä¿å­˜åèƒ½è‡ªåŠ¨æ ¡éªŒå¹¶ä¿®æ­£ï¼š\n\n","slug":"webpack5æ­å»ºvue3ç¯å¢ƒ","date":"2021-08-07T08:52:54.000Z","categories_index":"webpack","tags_index":"webpack webå‰ç«¯","author_index":"EVE"},{"id":"43e50756c3c9f1fa16f87b82a098213d","title":"koaçš„åŸºæœ¬ä½¿ç”¨","content":"koa demoå­¦æ ¡æœŸæœ«å®è·µè¦æ±‚åšä¸€ä¸ªç®¡ç†ç³»ç»Ÿï¼Œåˆšå¥½æœ€è¿‘åœ¨çœ‹ node åç«¯çš„ä¸œè¥¿ï¼Œå°±å­¦ä¹ ä¸€ä¸‹ koaï¼Œäº†è§£ä¸€ä¸‹æ´‹è‘±åœˆæ¨¡å‹çš„æ€æƒ³å’Œ MVC æ¶æ„çš„åº”ç”¨ã€‚\n\n\nä¸€. å®‰è£… koaæ¯•ç«Ÿæ˜¯åç«¯æœåŠ¡ï¼Œç±»å‹æ£€æµ‹è¿˜æ˜¯æœ‰å¿…è¦ä¸Šçš„ï¼Œå°±é¡ºä¾¿åŠ ä¸Šäº† typescriptã€‚æ²¡æœ‰ä»é›¶å¼€å§‹æ­å»ºï¼Œç›´æ¥ç”¨åˆ«äººæ­å»ºå¥½çš„ç®€æ˜“è„šæ‰‹æ¶äº†ã€‚\ngit clone -b start-point https://github.com/tuture-dev/koa-quickstart.git\n\n\n\n\n\n\n\n\n\n\nè¿™é‡Œæˆ‘ä½¿ç”¨äº† package-lock.json ç¡®ä¿æ‰€æœ‰ä¾èµ–ç‰ˆæœ¬ä¸€è‡´ï¼Œå¦‚æœä½ ç”¨ yarn å®‰è£…ä¾èµ–å‡ºç°é—®é¢˜ï¼Œå»ºè®®åˆ é™¤ node_modules ï¼Œé‡æ–°ç”¨ npm install å®‰è£…ã€‚\näºŒ. æ­å»ºæœåŠ¡å™¨\nåˆå§‹åŒ–å®ä¾‹ app\næ³¨å†Œç›¸å…³çš„ä¸­é—´ä»¶ï¼ˆè·¨åŸŸ cors å’Œè¯·æ±‚ä½“è§£æä¸­é—´ä»¶ bodyParserï¼‰\næ·»åŠ è¯·æ±‚å¤„ç†å¤„ç†ï¼Œå“åº”ç”¨æˆ·è¯·æ±‚\nè¿è¡ŒæœåŠ¡å™¨\n\n\n\n\n\n\n\n\n\n\nexpress ä¸­çš„è¯·æ±‚å¤„ç†å‡½æ•°ï¼š\nfunction handler(req, res) &#123;\n  res.send(\"Hello Express\");\n&#125;\n\nkoa ä¸­çš„ï¼š\napp.use((ctx) &#x3D;&gt; &#123;\n  ctx.body &#x3D; &quot;Hello Koa&quot;;\n&#125;);\nctxï¼ˆcontextï¼‰æ˜¯ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œ\nä¸‰. è¿è¡ŒæœåŠ¡è¿™é‡Œæœ‰ä¸ª ts çš„æŠ¥é”™ï¼š\nWarning: To load an ES module, set \"type\": \"module\" in the package.json or use the .mjs extension.\n\nè¿™ä¸ªé—®é¢˜æ¶‰åŠ s çš„æ¨¡å—åŒ–ï¼Œé¡ºä¾¿å¤ä¹ ä¸€ä¸‹ï¼š\n\nAMD (Asynchronous Module Definition): åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ï¼Œå¹¶ç”¨ define å‡½æ•°å®šä¹‰æ¨¡å—ï¼›\nCJS (CommonJS): åœ¨ NodeJS ä¸­ä½¿ç”¨ï¼Œç”¨ require å’Œ module.exports å¼•å…¥å’Œå¯¼å‡ºæ¨¡å—ï¼›\nESM (ES Modules): JavaScript ä» ES6(ES2015) å¼€å§‹æ”¯æŒçš„åŸç”Ÿæ¨¡å—æœºåˆ¶ï¼Œä½¿ç”¨ import å’Œ export å¼•å…¥å’Œå¯¼å‡ºæ¨¡å—ï¼›\n\næŠ¥é”™çš„åŸå› ï¼šnode 13.2.0 ä»¥å‰ä¸æ”¯æŒ ES Moduleï¼ˆå½“å‰ç¯å¢ƒä¸‹æ˜¯ 12.18.3ï¼‰\nè§£å†³åŠæ³•ï¼š\n\nå‡çº§ node, ç›´æ¥ä¸Šå®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆæœ¬è¦†ç›–\npackage.json æ·»åŠ  â€˜typeâ€™: â€˜moduleâ€™\n\nè¿™é‡Œæ˜¯ç”¨äº† nodemanï¼Œæ‰€ä»¥ä¸ä¼šæœ‰æ¨¡å—æŠ¥é”™çš„é—®é¢˜\nå››. ä¸­é—´ä»¶\n\n\n\n\n\n\n\n\nExpressive middleware for node.js using ES2017 async functions.ï¼ˆé€šè¿‡ ES2017 async å‡½æ•°ç¼–å†™å¯Œæœ‰è¡¨è¾¾åŠ›çš„ Node.js ä¸­é—´ä»¶ï¼‰\nkoa åªæ˜¯ä¸€ä¸ªä¸­é—´ä»¶æ¡†æ¶ï¼Œå¯¹æ ‡çš„æ˜¯ express åº•å±‚çš„ä¸­é—´ä»¶å±‚ï¼Œè€Œä¸åŒ…å«è¯¸å¦‚è·¯ç”±ã€æ¨¡æ¿å¼•æ“ã€å‘é€æ–‡ä»¶ç­‰åŠŸèƒ½\n\n1. æ´‹è‘±åœˆæ¨¡å‹\n\nexpress çš„ä¸­é—´ä»¶ï¼š\n\n\nè¯·æ±‚ï¼ˆRequestï¼‰ç›´æ¥ä¾æ¬¡è´¯ç©¿å„ä¸ªä¸­é—´ä»¶ï¼Œæœ€åé€šè¿‡è¯·æ±‚å¤„ç†å‡½æ•°è¿”å›å“åº”ï¼ˆResponseï¼‰\nkoa çš„ä¸­é—´ä»¶ï¼š\n\nKoa ä¸­é—´ä»¶ä¸åƒ Express ä¸­é—´ä»¶é‚£æ ·åœ¨è¯·æ±‚é€šè¿‡äº†ä¹‹åå°±å®Œæˆäº†è‡ªå·±çš„ä½¿å‘½ï¼›ç›¸åï¼Œä¸­é—´ä»¶çš„æ‰§è¡Œæ¸…æ™°åœ°åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µ\n2. ä¸­é—´ä»¶çš„å®šä¹‰async function middleware(ctx, next) &#123;\n  // ç¬¬ä¸€é˜¶æ®µ\n  await next();\n  // ç¬¬äºŒé˜¶æ®µ\n&#125;\n\n\nctxï¼šå°±æ˜¯ koa context, è´¯ç©¿ä¸Šå›¾æ‰€æœ‰ä¸­é—´ä»¶å’Œè¯·æ±‚å¤„ç†å‡½æ•°çš„ç»¿è‰²ç®­å¤´æ‰€ä¼ é€’çš„å†…å®¹ï¼Œé‡Œé¢å°è£…äº†è¯·æ±‚ä½“å’Œå“åº”ä½“ï¼ˆå’Œå…¶ä»–å±æ€§ï¼‰ï¼Œå¸¸ç”¨å±æ€§ï¼šContext API æ–‡æ¡£ã€‚\nctx.url; // ç›¸å½“äº ctx.request.url\nctx.body; // ç›¸å½“äº ctx.response.body\nctx.status; // ç›¸å½“äº ctx.response.status\nnextï¼šå°†æ§åˆ¶æƒè½¬äº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œä¸ express çš„ next å‡½æ•°æœ¬è´¨çš„ä¸åŒæ˜¯ï¼Œè¿”å›ä¸€ä¸ª promiseï¼Œåœ¨è¿™ä¸ª Promise è¿›å…¥å®ŒæˆçŠ¶æ€ï¼ˆFulfilledï¼‰åï¼Œå°±ä¼šå»æ‰§è¡Œä¸­é—´ä»¶ä¸­ç¬¬äºŒé˜¶æ®µçš„ä»£ç \n\n\n3. æ—¥å¿—è®°å½•ä¸­é—´ä»¶ç®€å•çš„ä¸€ä¸ªloggerï¼Œæ‰“å°æ¯æ¬¡è¯·æ±‚çš„æ–¹æ³•ï¼Œurlï¼ŒçŠ¶æ€ç å’Œå“åº”æ—¶é—´\nimport &#123; Context &#125; from &quot;koa&quot;;\n\nexport function logger() &#123;\n  return async (ctx: Context, next: () &#x3D;&gt; Promise&lt;void&gt;) &#x3D;&gt; &#123;\n    const start &#x3D; Date.now();\n    await next();\n    const ms &#x3D; Date.now() - start;\n    console.log(&#96;$&#123;ctx.method&#125; $&#123;ctx.url&#125; $&#123;ctx.status&#125; - $&#123;ms&#125;ms&#96;);\n  &#125;;\n&#125;\n\næ­¤å¤„çš„ logger æ˜¯ä¸€ä¸ªä¸­é—´ä»¶å·¥å‚å‡½æ•°ï¼ˆFactoryï¼‰ï¼Œè°ƒç”¨è¿™ä¸ªå·¥å‚å‡½æ•°è¿”å›çš„ç»“æœæ‰æ˜¯çœŸæ­£çš„ koa ä¸­é—´ä»¶ã€‚ä¹‹æ‰€ä»¥å†™æˆä¸€ä¸ªå·¥å‚å‡½æ•°ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬å¯ä»¥é€šè¿‡ç»™å·¥å‚å‡½æ•°ä¼ å‚çš„æ–¹å¼æ¥æ›´å¥½åœ°æ§åˆ¶ä¸­é—´ä»¶çš„è¡Œä¸º\nåœ¨è¿™ä¸ªä¸­é—´ä»¶çš„ç¬¬ä¸€é˜¶æ®µï¼Œæˆ‘ä»¬é€šè¿‡ Date.now() å…ˆè·å–è¯·æ±‚è¿›å…¥çš„æ—¶é—´ï¼Œç„¶åé€šè¿‡ await next() è®©å‡ºæ‰§è¡Œæƒï¼Œç­‰å¾…ä¸‹æ¸¸ä¸­é—´ä»¶è¿è¡Œç»“æŸåï¼Œå†åœ¨ç¬¬äºŒé˜¶æ®µé€šè¿‡è®¡ç®— Date.now() çš„å·®å€¼æ¥å¾—å‡ºå¤„ç†è¯·æ±‚æ‰€ç”¨çš„æ—¶é—´\näº”. è·¯ç”±é…ç½®ç”±äº koa åªæ˜¯ä¸€ä¸ªä¸­é—´ä»¶æ¡†æ¶ï¼Œæ‰€ä»¥è·¯ç”±çš„é…ç½®éœ€è¦ç‹¬ç«‹çš„ npm åŒ…ï¼Œå…ˆå®‰è£… @koa/router åŠå…¶ ts ç±»å‹å®šä¹‰ï¼šï¼š\n$ npm install @koa/router\n$ npm install @types/koa__router -D\n\n\n\n\n\n\n\n\n\n\nä¹Ÿå¯ä»¥ä½¿ç”¨koa-routerï¼Œä½†koa-routerç›®å‰å¤„äºå‡ ä¹æ— äººç»´æŠ¤çš„çŠ¶æ€ï¼Œæ‰€ä»¥ä½¿ç”¨ç»´æŠ¤æ›´ç§¯æçš„ Fork ç‰ˆæœ¬ @koa/router\n1. è·¯ç”±è§„åˆ’\nGET /users ï¼šæŸ¥è¯¢æ‰€æœ‰çš„ç”¨æˆ·\nGET /users/:id ï¼šæŸ¥è¯¢å•ä¸ªç”¨æˆ·\nPUT /users/:id ï¼šæ›´æ–°å•ä¸ªç”¨æˆ·\nDELETE /users/:id ï¼šåˆ é™¤å•ä¸ªç”¨æˆ·\nPOST /users/login ï¼šç™»å½•ï¼ˆè·å– JWT Tokenï¼‰\nPOST /users/register ï¼šæ³¨å†Œç”¨æˆ·\n\n2. å®ç° Controlleråˆ›å»ºcontrollersç›®å½•ï¼Œå­˜æ”¾æ§åˆ¶å™¨ç›¸å…³çš„ä»£ç \nAuthController:\n&#x2F;&#x2F; src&#x2F;controllers&#x2F;auth.ts\nimport &#123; Context &#125; from &quot;koa&quot;;\n\nexport default class AuthController &#123;\n  public static async login(ctx: Context) &#123;\n    ctx.body &#x3D; &quot;Login controller&quot;;\n  &#125;\n\n  public static async register(ctx: Context) &#123;\n    ctx.body &#x3D; &quot;Register controller&quot;;\n  &#125;\n&#125;\n\n`UserController``:\nimport &#123; Context &#125; from 'koa'\n\nexport default class UserController &#123;\n  public static async listUsers (ctx: Context) &#123;\n    ctx.body = 'ListUsers controller';\n  &#125;\n\n  public static async showUserDetail (ctx: Context) &#123;\n    ctx.body = `ShowUserDetail controller with ID = $&#123;ctx.params.id&#125;`;\n  &#125;\n\n  public static async updateUser (ctx: Context) &#123;\n    ctx.body = `UpdateUser controller with ID = $&#123;ctx.params.id&#125;`\n  &#125;\nf\n\n  public static async deleteUser (ctx: Context) &#123;\n    ctx.body = `DeleteUser controller with ID = $&#123;ctx.params.id&#125;`;\n  &#125;\n&#125;\n\n3. å®ç°è·¯ç”±åˆ›å»º routers.tsï¼ŒæŠŠæ§åˆ¶å™¨æŒ‚è½½åˆ°å¯¹åº”çš„è·¯ç”±ä¸Šé¢ï¼š\n&#x2F;&#x2F; src&#x2F;routes.ts\nimport Router from &quot;@koa&#x2F;router&quot;;\n\nimport AuthController from &quot;.&#x2F;controllers&#x2F;auth&quot;;\nimport UserController from &quot;.&#x2F;controllers&#x2F;user&quot;;\n\nconst router &#x3D; new Router();\n\n&#x2F;&#x2F; auth ç›¸å…³çš„è·¯ç”±\nrouter.post(&quot;&#x2F;auth&#x2F;login&quot;, AuthController.login);\nrouter.post(&quot;&#x2F;auth&#x2F;register&quot;, AuthController.register);\n\n&#x2F;&#x2F; users ç›¸å…³çš„è·¯ç”±\nrouter.get(&quot;&#x2F;users&quot;, UserController.listUsers);\nrouter.get(&quot;&#x2F;users&#x2F;:id&quot;, UserController.showUserDetail);\nrouter.put(&quot;&#x2F;users&#x2F;:id&quot;, UserController.updateUser);\nrouter.delete(&quot;&#x2F;users&#x2F;:id&quot;, UserController.deleteUser);\n\nexport default router;\n\nè¿™é‡Œå¯¼å…¥@koa/router æŠ¥äº†ä¸ªé”™ï¼š\n\nåŸå› æ˜¯ ts æ–‡ä»¶å¼•å…¥ç¬¬ä¸‰æ–¹çš„æ¨¡å—ç¼ºå°‘ç±»å‹å£°æ˜ï¼Œè§£å†³æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼š\n\nè‡ªå·±ç¼–å†™ç±»å‹å£°æ˜æ–‡ä»¶\nå®‰è£…å®˜æ–¹æä¾›çš„.d.ts\n\n4. æ³¨å†Œè·¯ç”±å°† router æ³¨å†Œä¸ºä¸­é—´ä»¶\napp.use(router.routes()).use(router.allowedMethods());\n\nè¿™é‡Œæˆ‘ä»¬è°ƒç”¨ router å¯¹è±¡çš„ routes æ–¹æ³•è·å–åˆ°å¯¹åº”çš„ Koa ä¸­é—´ä»¶ï¼Œè¿˜è°ƒç”¨äº† allowedMethods æ–¹æ³•æ³¨å†Œäº† HTTP æ–¹æ³•æ£€æµ‹çš„ä¸­é—´ä»¶ï¼Œè¿™æ ·å½“ç”¨æˆ·é€šè¿‡ä¸æ­£ç¡®çš„ HTTP æ–¹æ³•è®¿é—® API æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨è¿”å› 405 Method Not Allowed çŠ¶æ€ç \nå…­. æ¥å…¥ MySql1. è¿è¡Œæ•°æ®åº“å®‰è£…ã€è¿è¡Œ MySqlï¼Œé€šè¿‡å‘½ä»¤è¡Œè¿æ¥æ•°æ®åº“ï¼š\nmysql -u root -p\n\nè¾“å…¥é¢„å…ˆè®¾ç½®å¥½çš„æ ¹è´¦æˆ·å¯†ç ï¼Œè¿›å…¥ MySql çš„äº¤äº’å¼æ‰§è¡Œå®¢æˆ·ç«¯ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\n--- åˆ›å»ºæ•°æ®åº“\nCREATE DATABASE koa;\n\n--- åˆ›å»ºç”¨æˆ·å¹¶æˆäºˆæƒé™\nCREATE USER 'user'@'localhost' IDENTIFIED BY 'pass';\nGRANT ALL PRIVILEGES ON koa.* TO 'user'@'localhost';\n\n--- å¤„ç† MySQL 8.0 ç‰ˆæœ¬çš„è®¤è¯åè®®é—®é¢˜\nALTER USER 'user'@'localhost' IDENTIFIED WITH mysql_native_password BY 'pass';\nflush privileges;\n\n2. TypeORM çš„é…ç½®å’Œè¿æ¥å®‰è£…ç›¸å…³çš„ npm åŒ…ï¼Œåˆ†åˆ«æ˜¯ MySql é©±åŠ¨ï¼ŒTypeORM ä»¥åŠ reflect-metadataï¼ˆåå°„ api åº“ï¼Œç”¨äº TypeORM æ¨æ–­æ¨¡å‹çš„å…ƒæ•°æ®ï¼‰\nnpm install mysql typeorm reflect-metadata\n\nç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºormconfig.jsonï¼ŒTypeORM ä¼šè¯»å–è¿™ä¸ªæ•°æ®åº“é…ç½®è¿›è¡Œè¿æ¥ï¼š\n// ormconfig.json\n&#123;\n  \"type\": \"mysql\",\n  \"host\": \"localhost\",\n  \"port\": 3306,\n  \"username\": \"user\",\n  \"password\": \"pass\",\n  \"database\": \"koa\",\n  \"synchronize\": true, // è®¾ä¸ºtrueèƒ½å¤Ÿè®©æ¯æ¬¡ä¿®æ”¹æ¨¡å‹å®šä¹‰åèƒ½è‡ªåŠ¨åŒæ­¥åˆ°æ•°æ®åº“ï¼ˆå°±æ˜¯å…¶ä»–ORMçš„è‡ªåŠ¨æ•°æ®è¿ç§»ï¼‰\n  \"entities\": [\"src/entity/*.ts\"], // å®šä¹‰äº†æ¨¡å‹æ–‡ä»¶çš„è·¯å¾„ï¼Œä¸‹æ–‡åˆ›å»º\n  \"cli\": &#123;\n    \"entitiesDir\": \"src/entity\"\n  &#125;\n&#125;\n\n3. è¿æ¥æ•°æ®åº“ä¿®æ”¹ src/server.tsï¼š\n&#x2F;&#x2F; src&#x2F;server.ts\nimport Koa from &quot;koa&quot;;\nimport cors from &quot;@koa&#x2F;cors&quot;;\nimport bodyParser from &quot;koa-bodyparser&quot;;\nimport &#123; createConnection &#125; from &quot;typeorm&quot;;\nimport &quot;reflect-metadata&quot;;\n\nimport router from &quot;.&#x2F;routes&quot;;\nimport &#123; logger &#125; from &quot;.&#x2F;logger&quot;;\n\ncreateConnection()\n  .then(() &#x3D;&gt; &#123;\n    &#x2F;&#x2F; åˆå§‹åŒ– Koa åº”ç”¨å®ä¾‹\n    const app &#x3D; new Koa();\n\n    &#x2F;&#x2F; æ³¨å†Œä¸­é—´ä»¶\n    app.use(logger());\n    app.use(cors());\n    app.use(bodyParser());\n\n    &#x2F;&#x2F; å“åº”ç”¨æˆ·è¯·æ±‚\n    app.use(router.routes()).use(router.allowedMethods());\n\n    &#x2F;&#x2F; è¿è¡ŒæœåŠ¡å™¨\n    app.listen(3000);\n  &#125;)\n  .catch((err: string) &#x3D;&gt; console.log(&quot;TypeORM connection error:&quot;, err));\n\n4. åˆ›å»ºæ•°æ®æ¨¡å‹å®šä¹‰åœ¨srcä¸‹åˆ›å»ºentityç›®å½•ï¼Œç”¨äºå­˜æ”¾æ•°æ®æ¨¡å‹å®šä¹‰æ–‡ä»¶ï¼Œåˆ›å»º user.tsï¼Œä»£è¡¨ç”¨æˆ·æ¨¡å‹ï¼š\n&#x2F;&#x2F; src&#x2F;entity&#x2F;user.ts\nimport &#123; Entity, Column, PrimaryGeneratedColumn &#125; from &quot;typeorm&quot;;\n\n@Entity()\nexport class User &#123;\n  @PrimaryGeneratedColumn()\n  id: number;\n\n  @Column()\n  name: string;\n\n  @Column(&#123; select: false &#125;)\n  password: string;\n\n  @Column()\n  email: string;\n&#125;\n\ntypeormä½¿ç”¨è£…é¥°å™¨å°†userç±»æ˜ å°„åˆ°æ•°æ®åº“ä¸­çš„è¡¨ï¼š\n\nEntityï¼šç”¨äºè£…é¥°æ•´ä¸ªç±»ï¼Œä½¿å…¶å˜æˆä¸€ä¸ªæ•°æ®åº“æ¨¡å‹\nColumnï¼šè£…é¥°ç±»çš„æŸä¸ªå±æ€§ï¼Œä½¿å…¶å¯¹åº”äºæ•°æ®åº“è¡¨ä¸­çš„ä¸€åˆ—ï¼Œå¯æä¾›ä¸€ç³»åˆ—é€‰é¡¹å‚æ•°ï¼Œå¦‚select: falseï¼Œè¡¨ç¤ºè¯¥å­—æ®µåœ¨æŸ¥è¯¢æ—¶é»˜è®¤ä¸è¢«é€‰ä¸­\nPrimaryGenerateColumnï¼šè£…é¥°ä¸»åˆ—ï¼Œå€¼è‡ªåŠ¨ç”Ÿæˆ\n\n\n\n\n\n\n\n\n\n\ntypeorm çš„è£…é¥°å™¨å®šä¹‰å’Œä½¿ç”¨ï¼šè£…é¥°å™¨æ–‡æ¡£\nå®Œæˆä»¥ä¸Šé…ç½®ï¼Œå°±å¯ä»¥åœ¨ Controller ä¸­è¿›è¡Œæ•°æ®çš„å¢åˆ æ”¹æŸ¥äº†ã€‚\n5. å®ç° Controller çš„é€»è¾‘ï¼š5.1 å®ç° UserControllerï¼š&#x2F;&#x2F; src&#x2F;controllers&#x2F;user.ts\nimport &#123; Context &#125; from &quot;koa&quot;;\nimport &#123; getManager &#125; from &quot;typeorm&quot;;\n\nimport &#123; User &#125; from &quot;..&#x2F;entity&#x2F;user&quot;;\n\nexport default class UserController &#123;\n  public static async listUsers(ctx: Context) &#123;\n    const userRepository &#x3D; getManager().getRepository(User);\n    const users &#x3D; await userRepository.find();\n\n    ctx.status &#x3D; 200;\n    ctx.body &#x3D; users;\n  &#125;\n\n  public static async showUserDetail(ctx: Context) &#123;\n    const userRepository &#x3D; getManager().getRepository(User);\n    const user &#x3D; await userRepository.findOne(+ctx.params.id);\n\n    if (user) &#123;\n      ctx.status &#x3D; 200;\n      ctx.body &#x3D; user;\n    &#125; else &#123;\n      ctx.status &#x3D; 404;\n    &#125;\n  &#125;\n\n  public static async updateUser(ctx: Context) &#123;\n    const userRepository &#x3D; getManager().getRepository(User);\n    await userRepository.update(+ctx.params.id, ctx.request.body);\n    const updatedUser &#x3D; await userRepository.findOne(+ctx.params.id);\n\n    if (updatedUser) &#123;\n      ctx.status &#x3D; 200;\n      ctx.body &#x3D; updatedUser;\n    &#125; else &#123;\n      ctx.status &#x3D; 404;\n    &#125;\n  &#125;\n\n  public static async deleteUser(ctx: Context) &#123;\n    const userRepository &#x3D; getManager().getRepository(User);\n    await userRepository.delete(+ctx.params.id);\n\n    ctx.status &#x3D; 204;\n  &#125;\n&#125;\n\nTypeORM ä¸­æ“ä½œæ•°æ®æ¨¡å‹ä¸»è¦æ˜¯é€šè¿‡Repositoryå®ç°çš„ï¼Œé€šè¿‡getManager().getReposity(Model)è·å–åˆ°\n\n\n\n\n\n\n\n\n\nå…³äº Repository çš„æŸ¥è¯¢ APIï¼Œå‚è€ƒreposity-apiã€‚\n5.2 å®ç° AuthCotrollerï¼šå®‰è£… npm åŠ å¯†ç®—æ³•åŒ…ï¼šè¿™é‡Œé‡‡ç”¨ Argon2ï¼š\nnpm install argon2\n\nå®ç°å…·ä½“çš„ AuthCotroller çš„é€»è¾‘ï¼š\nexport default class AuthController &#123;\n  public static async login(ctx: Context) &#123;\n    ctx.body &#x3D; &quot;Login controller&quot;;\n  &#125;\n\n  public static async register(ctx: Context) &#123;\n    console.log(ctx.request.body);\n\n    const userRepository &#x3D; getManager().getRepository(User);\n\n    const newUser &#x3D; new User();\n\n    const &#123;\n      request: &#123;\n        body: &#123; name, email, password &#125;,\n      &#125;,\n    &#125; &#x3D; ctx;\n    newUser.name &#x3D; name;\n    newUser.email &#x3D; email;\n    newUser.password &#x3D; password;\n\n    const user &#x3D; await userRepository.save(newUser);\n\n    ctx.status &#x3D; 201;\n    ctx.body &#x3D; user;\n  &#125;\n&#125;\n\nä¸ƒ. å®ç° JWT é‰´æƒ:\n\n\n\n\n\n\n\n\nJSON Web Token æ˜¯ä¸€ç§æµè¡Œçš„ RESTFUL API é‰´æƒæ–¹æ¡ˆï¼Œå…¶åŸç†ï¼ˆå¯å‚è€ƒï¼‰\nå®‰è£…ç›¸å…³çš„ npm åŒ…ï¼š\nnpm install koa-jwt jsonwebtoken\nnpm install @types/jsonwebtoken -D\n\nåˆ›å»º src/constants.tsï¼Œç”¨äºå­˜æ”¾ JWT Secret å¸¸é‡ï¼š\n&#x2F;&#x2F; src&#x2F;constants.ts\nexport const JWT_SECRET &#x3D; &quot;secret&quot;; &#x2F;&#x2F; å®é™…å¼€å‘ä¸­ï¼Œç”¨æ›¿æ¢æˆä¸€ä¸ªè¶³å¤Ÿå¤æ‚çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”æœ€å¥½é€šè¿‡ç¯å¢ƒå˜é‡çš„æ–¹å¼æ³¨å…¥\n\n1.é‡æ–°è§„åˆ’è·¯ç”±\næ‰€æœ‰è¯·æ±‚éƒ½å¯ä»¥ç›´æ¥è®¿é—®æœªå—ä¿æŠ¤çš„è·¯ç”±ï¼Œä½†æ˜¯å—ä¿æŠ¤çš„è·¯ç”±å°±æ”¾åœ¨ JWT ä¸­é—´ä»¶çš„åé¢ï¼ˆæˆ–è€…ä»æ´‹è‘±æ¨¡å‹çš„è§’åº¦çœ‹æ˜¯â€œé‡Œé¢â€ï¼‰ï¼Œè¿™æ ·å¯¹äºæ²¡æœ‰æºå¸¦ JWT Token çš„è¯·æ±‚å°±ç›´æ¥è¿”å›ï¼Œè€Œä¸ä¼šç»§ç»­ä¼ é€’ä¸‹å»\næ‰“å¼€src/routers.tsè·¯ç”±æ–‡ä»¶ï¼Œåšå¦‚ä¸‹ä¿®æ”¹ï¼š\nimport Router from \"@koa/router\";\n\nimport AuthController from \"./controllers/auth\";\nimport UserController from \"./controllers/user\";\n\nconst unprotectedRouter = new Router();\nconst protectedRouter = new Router();\n\n// authç›¸å…³è·¯ç”±\nunprotectedRouter.post(\"/auth/login\", AuthController.login);\nunprotectedRouter.post(\"/auth/register\", AuthController.register);\n\n// userç›¸å…³è·¯ç”±\nprotectedRouter.get(\"/users\", UserController.listUsers);\nprotectedRouter.get(\"/users/:id\", UserController.showUserDetail);\n\nprotectedRouter.put(\"users/:id\", UserController.updateUser);\n\nprotectedRouter.delete(\"/users:id\", UserController.deleteUser);\n\nexport &#123; protectedRouter, unprotectedRouter &#125;;\n\n2.æ³¨å†Œ JWT ä¸­é—´ä»¶æ³¨å†Œ JWT ä¸­é—´ä»¶ï¼Œå¹¶åœ¨å…¶å‰åæ³¨å†Œä¸éœ€è¦ä¿æŠ¤çš„è·¯ç”±unprotectedRouterå’Œéœ€è¦ä¿æŠ¤çš„è·¯ç”±protectedRouter\n\n\n\n\n\n\n\n\n\nåœ¨ JWT ä¸­é—´ä»¶æ³¨å†Œå®Œæ¯•åï¼Œå¦‚æœç”¨æˆ·è¯·æ±‚æºå¸¦äº†æœ‰æ•ˆçš„ Tokenï¼Œåé¢çš„ protectedRouter å°±å¯ä»¥é€šè¿‡ ctx.state.user è·å–åˆ° Token çš„å†…å®¹ï¼ˆæ›´ç²¾ç¡®çš„è¯´æ³•æ˜¯ Payloadï¼Œè´Ÿè½½ï¼Œä¸€èˆ¬æ˜¯ç”¨æˆ·çš„å…³é”®ä¿¡æ¯ï¼Œä¾‹å¦‚ IDï¼‰äº†ï¼›åä¹‹ï¼Œå¦‚æœ Token ç¼ºå¤±æˆ–æ— æ•ˆï¼Œé‚£ä¹ˆ JWT ä¸­é—´ä»¶ä¼šç›´æ¥è‡ªåŠ¨è¿”å› 401 é”™è¯¯ã€‚å…³äº koa-jwt çš„æ›´å¤šä½¿ç”¨ç»†èŠ‚ï¼Œè¯·å‚è€ƒå…¶æ–‡æ¡£ã€‚\n3.åœ¨ Login ä¸­ç­¾å‘ JWT Token\n// src/controllers/auth.ts\n// ...\nimport jwt from \"jsonwebtoken\";\n\n// ...\nimport &#123; JWT_SECRET &#125; from \"../constants\";\n\nexport default class AuthController &#123;\n  public static async login(ctx: Context) &#123;\n    const userRepository = getManager().getRepository(User);\n\n    const user = await userRepository\n      .createQueryBuilder()\n      .where(&#123; name: ctx.request.body.name &#125;)\n      .addSelect(\"User.password\")\n      .getOne();\n\n    if (!user) &#123;\n      ctx.status = 401;\n      ctx.body = &#123; message: \"ç”¨æˆ·åä¸å­˜åœ¨\" &#125;;\n    &#125; else if (await argon2.verify(user.password, ctx.request.body.password)) &#123;\n      ctx.status = 200;\n      ctx.body = &#123; token: jwt.sign(&#123; id: user.id &#125;, JWT_SECRET) &#125;;\n    &#125; else &#123;\n      ctx.status = 401;\n      ctx.body = &#123; message: \"å¯†ç é”™è¯¯\" &#125;;\n    &#125;\n  &#125;\n\n  // ...\n&#125;\n\nåœ¨ login ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆæ ¹æ®ç”¨æˆ·åï¼ˆè¯·æ±‚ä½“ä¸­çš„ name å­—æ®µï¼‰æŸ¥è¯¢å¯¹åº”çš„ç”¨æˆ·ï¼Œå¦‚æœè¯¥ç”¨æˆ·ä¸å­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å› 401ï¼›å­˜åœ¨çš„è¯å†é€šè¿‡ argon2.verify æ¥éªŒè¯è¯·æ±‚ä½“ä¸­çš„æ˜æ–‡å¯†ç  password æ˜¯å¦å’Œæ•°æ®åº“ä¸­å­˜å‚¨çš„åŠ å¯†å¯†ç æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´åˆ™é€šè¿‡ jwt.sign ç­¾å‘ Tokenï¼Œå¦‚æœä¸ä¸€è‡´åˆ™è¿˜æ˜¯è¿”å› 401ã€‚\nè¿™é‡Œçš„ Token è´Ÿè½½å°±æ˜¯æ ‡è¯†ç”¨æˆ· ID çš„å¯¹è±¡ &#123; id: user.id &#125; ï¼Œè¿™æ ·åé¢é‰´æƒæˆåŠŸåå°±å¯ä»¥é€šè¿‡ ctx.user.id æ¥è·å–ç”¨æˆ· IDã€‚\nè¿™é‡Œè¿˜é‡åˆ°äº†ä¸€ä¸ªå° bugï¼š\nç™»å½•æ¥å£ä½¿ç”¨ post ä¼ å‚ï¼Œå‚æ•°ã€è·¯ç”±å‡æ— å‡ºé”™ï¼Œè¿”å›çš„å´éƒ½æ˜¯ 404ï¼Œå“åº”ä½“ä¹Ÿä¸ºç©º\nè¿™æ˜¯åŸå›  controller ä¸­ä½¿ç”¨åˆ°äº†å¼‚æ­¥çš„è®¿é—®æ•°æ®åº“ apiï¼Œä½†æ˜¯æ–¹æ³•è°ƒç”¨å¿˜è®°åŠ awaitï¼Œè€Œ koa çš„ ctx åœ¨æ²¡æœ‰ä»»ä½•æ”¹åŠ¨çš„æƒ…å†µä¸‹ï¼Œé»˜è®¤è¿”å› status å°±æ˜¯ 404ï¼Œbody ä¹Ÿä¸ºç©º\næ€»ç»“ä¸€ä¸‹å¯èƒ½å‡ºç° 404 çš„åŸå› :\n\nå¦‚æœæµè§ˆå™¨è¯·æ±‚å® 404ï¼Œå¯èƒ½æ˜¯æ¥å£ url æ²¡å†™å¯¹ï¼Œæˆ–è€… post å‚æ•°åå‡ºé”™ï¼ˆå³æ‰¾ä¸åˆ°åç«¯å¯¹åº”çš„ controller æ–¹æ³•ï¼‰\nå¦‚æœæµè§ˆå™¨æ²¡æœ‰æŠ¥é”™ï¼Œè€Œ response è¿”å› 404ï¼Œä¸”åç«¯ api é€»è¾‘æ­£å¸¸ï¼Œå¯èƒ½æ˜¯æ²¡æœ‰æ“ä½œ koa çš„ ctxï¼Œä¿®æ”¹ body å’Œ status\nasync æ–¹æ³•å·²ç»ä¿®æ”¹äº† ctxï¼Œä½†è°ƒç”¨æ—¶æ²¡æœ‰åŠ  await\n\n3.åœ¨ User æ§åˆ¶å™¨ä¸­æ·»åŠ è®¿é—®æ§åˆ¶Token çš„ä¸­é—´ä»¶å’Œç­¾å‘éƒ½æå®šä¹‹åï¼Œæœ€åä¸€æ­¥å°±æ˜¯åœ¨åˆé€‚çš„åœ°æ–¹æ ¡éªŒç”¨æˆ·çš„ Tokenï¼Œç¡®è®¤å…¶æ˜¯å¦æœ‰è¶³å¤Ÿçš„æƒé™ã€‚æœ€å…¸å‹çš„åœºæ™¯ä¾¿æ˜¯ï¼Œåœ¨æ›´æ–°æˆ–åˆ é™¤ç”¨æˆ·æ—¶ï¼Œæˆ‘ä»¬è¦ç¡®ä¿æ˜¯ç”¨æˆ·æœ¬äººåœ¨æ“ä½œã€‚æ‰“å¼€ src/controllers/user.ts ï¼Œä»£ç å¦‚ä¸‹ï¼š\n// src/controllers/user.ts\n// ...\n\nexport default class UserController &#123;\n  // ...\n\n  public static async updateUser(ctx: Context) &#123;\n    const userId = +ctx.params.id;\n\n    if (userId !== +ctx.state.user.id) &#123;\n      ctx.status = 403;\n      ctx.body = &#123; message: \"æ— æƒè¿›è¡Œæ­¤æ“ä½œ\" &#125;;\n      return;\n    &#125;\n\n    const userRepository = getManager().getRepository(User);\n    await userRepository.update(userId, ctx.request.body);\n    const updatedUser = await userRepository.findOne(userId);\n\n    // ...\n  &#125;\n\n  public static async deleteUser(ctx: Context) &#123;\n    const userId = +ctx.params.id;\n\n    if (userId !== +ctx.state.user.id) &#123;\n      ctx.status = 403;\n      ctx.body = &#123; message: \"æ— æƒè¿›è¡Œæ­¤æ“ä½œ\" &#125;;\n      return;\n    &#125;\n\n    const userRepository = getManager().getRepository(User);\n    await userRepository.delete(userId);\n\n    ctx.status = 204;\n  &#125;\n&#125;\n\nä¸¤ä¸ª Controller çš„é‰´æƒé€»è¾‘åŸºæœ¬ç›¸åŒï¼Œæˆ‘ä»¬é€šè¿‡æ¯”è¾ƒ ctx.params.id å’Œ ctx.state.user.id æ˜¯å¦ç›¸åŒï¼Œå¦‚æœä¸ç›¸åŒåˆ™è¿”å› 403 Forbidden é”™è¯¯ï¼Œç›¸åŒåˆ™ç»§ç»­æ‰§è¡Œç›¸åº”çš„æ•°æ®åº“æ“ä½œã€‚\n","slug":"koaåŸºæœ¬ä½¿ç”¨","date":"2021-07-03T12:54:26.000Z","categories_index":"node","tags_index":"node,koa","author_index":"EVE"},{"id":"621ca8e76bddb73a9eb22e1cc02afcf5","title":"Node.js å®ç°ç®€å•çš„ Web è·¯ç”±","content":"Node.js è·¯ç”±è·¯ç”±: Web æœåŠ¡å™¨æ ¹æ®ç”¨æˆ·è¾“å…¥çš„ä¸åŒ url è¿”å›ä¸åŒçš„é¡µé¢ã€‚\n\n\nä¾‹å¦‚ç™»å½•é¡µé¢ login å’Œæ³¨å†Œé¡µé¢ register\n#é»˜è®¤ç«¯å£éƒ½ä¸º80\nhttp:&#x2F;&#x2F;localhost:80&#x2F;login\nhttp:&#x2F;&#x2F;localhost:80&#x2F;register\n\nå®ç°æ€è·¯\nå»ºç«‹æ‰€éœ€è¦çš„æ–‡ä»¶, index.js æ–‡ä»¶ä½œä¸ºå…¥å£æ–‡ä»¶, router.js å®ç°è·¯ç”±å“åº”, server.js ç”¨æ¥å¤„ç†è¯·æ±‚. file æ–‡ä»¶å¤¹ä¸‹å°±å»ºç«‹å‡ ä¸ªä¸åŒçš„é¡µé¢, å±•ç¤ºè·¯ç”±è·³è½¬.\n \n\nåˆ›å»ºä¸€ä¸ª http æœåŠ¡å™¨ï¼Œç”¨äºç›‘å¬ç”¨æˆ·è¾“å…¥çš„ request å‚æ•°, è·å– request.url\n &#x2F;&#x2F; server.js\nconst http &#x3D; require(&quot;http&quot;);\n\nhttp.createServer(onRequest).listen(&#39;8888&#39;);\n\nfunction onRequest(req, res) &#123; &#x2F;&#x2F; onRequestå¤„ç†ç”¨æˆ·è¯·æ±‚\n    console.log(req.url);\n&#125;\nè§£æ urlï¼Œå¾—åˆ°å…·ä½“çš„è¯·æ±‚é¡µé¢ï¼Œä¹Ÿå°±æ˜¯è·¯ç”±å…¥å£\n &#x2F;&#x2F; server.js\nconst url &#x3D; require(&quot;url&quot;);\n\nfunction onRequest(req, res) &#123;\n    console.log(req.url);\n\n    let myUrl &#x3D; url.parse(req.url);\n    console.log(myUrl);\n&#125;\n\næ ¹æ® url æ¸²æŸ“ä¸åŒé¡µé¢\n const http &#x3D; require(&quot;http&quot;);\nconst fs &#x3D; require(&quot;fs&quot;);\n\nlet Response &#x3D; function(res, filePath) &#123;\nfs.readFile(filePath, (err, data) &#x3D;&gt; &#123;\n    if(err) &#123;\n        res.writeHead(404, &#123;\n            &quot;Content-Type&quot;: &quot;text&#x2F;html&quot;\n        &#125;);\n        res.end(&quot;error&quot;)\n    &#125; else &#123;\n        res.writeHead(200, &#123;\n            &quot;Content-Type&quot;: &quot;text&#x2F;html&quot;\n        &#125;);\n        res.end(data);\n    &#125;\n&#125;)\n&#125;\n\n\nlet router &#x3D; function(req, res) &#123;\nif(req.url &#x3D;&#x3D; &#39;&#x2F;index&#39; || req.url &#x3D;&#x3D; &#39;&#x2F;&#39;) &#123; &#x2F;&#x2F;ä¸»é¡µ\n    index.index(res);\n&#125; else if(req.url &#x3D;&#x3D; &#39;&#x2F;poem&#39;) &#123; &#x2F;&#x2F; å¤è¯—é¡µé¢\n    Response(res, poem);\n&#125; else &#123;  &#x2F;&#x2F; ä¸å­˜åœ¨çš„é¡µé¢\n    Response(res, error);\n&#125;\n&#125;\n\n\nå®Œæ•´ä»£ç ä»¥ä¸Šå‡ æ­¥å°±èƒ½åšä¸€ä¸ªç®€å•çš„ node è·¯ç”± demo äº†, ä¸‹é¢è´´ä¸Šå®Œæ•´çš„ä»£ç :\n&#x2F;&#x2F; å…¥å£æ–‡ä»¶\n&#x2F;&#x2F; index.js\nvar server &#x3D; require(&quot;.&#x2F;server&quot;);\n\nserver.start();\n\n&#x2F;&#x2F; router.js\n&#x2F;&#x2F; éœ€å“åº”çš„æ–‡ä»¶è·¯ç”±\n\nconst http &#x3D; require(&quot;http&quot;);\n\n&#x2F;&#x2F; å¯¼å…¥æ–‡ä»¶ç³»ç»Ÿæ¨¡å—\n&#x2F;&#x2F; æ‰€æœ‰çš„æ–‡ä»¶ç³»ç»Ÿæ“ä½œéƒ½å…·æœ‰åŒæ­¥çš„ã€å›è°ƒçš„ã€ä»¥åŠåŸºäº promise çš„å½¢å¼ã€‚\nconst fs &#x3D; require(&quot;fs&quot;);\n\nconst index &#x3D; require(&quot;.&#x2F;file&#x2F;index&quot;); &#x2F;&#x2F; ä¸»é¡µè·¯ç”±æ¨¡å—\nconst error &#x3D; &quot;.&#x2F;file&#x2F;error404.html&quot;; &#x2F;&#x2F; é”™è¯¯å¤„ç†è·¯ç”±\nconst poem &#x3D; &quot;.&#x2F;file&#x2F;poem.html&quot;;       &#x2F;&#x2F; å¤è¯—è·¯ç”±\n\nlet Response &#x3D; function(res, filePath) &#123;\n    fs.readFile(filePath, (err, data) &#x3D;&gt; &#123;\n        if(err) &#123;\n            res.writeHead(404, &#123;\n                &quot;Content-Type&quot;: &quot;text&#x2F;html&quot;\n            &#125;);\n            res.end(&quot;error&quot;)\n        &#125; else &#123;\n            res.writeHead(200, &#123;\n                &quot;Content-Type&quot;: &quot;text&#x2F;html&quot;\n            &#125;);\n            res.end(data);\n        &#125;\n    &#125;)\n&#125;\n\n\nlet router &#x3D; function(req, res) &#123;\n    if(req.url &#x3D;&#x3D; &#39;&#x2F;index&#39; || req.url &#x3D;&#x3D; &#39;&#x2F;&#39;) &#123; &#x2F;&#x2F;ä¸»é¡µ\n        index.index(res);\n    &#125; else if(req.url &#x3D;&#x3D; &#39;&#x2F;poem&#39;) &#123;\n        Response(res, poem);\n    &#125; else &#123;\n        Response(res, error);\n    &#125;\n&#125;\n\nexports.router &#x3D; router;\n\n\n&#x2F;&#x2F; server.js\n&#x2F;&#x2F; æœåŠ¡ç«¯çš„startå‡½æ•°, ç”¨äºå¼€å¯ä¸€ä¸ªwebæœåŠ¡å™¨\n\n&#x2F;&#x2F; å¯¼å…¥httpæ¨¡å—ï¼Œä½¿ç”¨HTTPæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯\n\n&#x2F;&#x2F; Nodeä¸­çš„HTTP APIæ˜¯éå¸¸åº•å±‚çš„ï¼Œ\n&#x2F;&#x2F; ä»…è¿›è¡Œæµå¤„ç†å’Œæ¶ˆæ¯è§£æã€‚å®ƒå°†æ¶ˆæ¯è§£æä¸ºæ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ï¼Œä½†ä¸ä¼šè§£æå…·ä½“çš„æ¶ˆæ¯å¤´æˆ–æ¶ˆæ¯ä½“\nconst http &#x3D; require(&quot;http&quot;);\n\n&#x2F;&#x2F; å¯¼å…¥urlæ¨¡å—ï¼Œç”¨äºå¤„ç†ä¸è§£æ URLã€‚\n\n&#x2F;&#x2F; URLå­—ç¬¦ä¸²æ˜¯ç»“æ„åŒ–çš„å­—ç¬¦ä¸²ï¼ŒåŒ…å«å¤šä¸ªå«ä¹‰ä¸åŒçš„ç»„æˆéƒ¨åˆ†ã€‚è§£æåè¿”å›çš„æ˜¯URLå¯¹è±¡\n&#x2F;&#x2F; url æ¨¡å—æä¾›äº†ä¸¤å¥— API æ¥å¤„ç† URLï¼šä¸€ä¸ªæ˜¯æ—§ç‰ˆæœ¬ä¼ ç»Ÿçš„ APIï¼Œä¸€ä¸ªæ˜¯å®ç°äº† WHATWGæ ‡å‡†çš„æ–° APIã€‚\nconst url &#x3D; require(&quot;url&quot;);\n\nconst router &#x3D; require(&#39;.&#x2F;router&#39;)\n\n\nfunction start() &#123;\n    function onRequest(req, res) &#123;\n        if(req.url &#x3D;&#x3D;&#x3D; &#39;&#x2F;favicon.ico&#39;) &#123;\n            &#x2F;&#x2F; æµè§ˆå™¨é»˜è®¤ä¼šè¯·æ±‚ç½‘ç«™æ ¹ç›®å½•çš„favicon.icoå›¾æ ‡ï¼Œå¦‚æœç½‘ç«™æ ¹ç›®å½•æ²¡æœ‰ä¼šäº§ç”Ÿ 404ã€‚å‡ºäºä¼˜åŒ–çš„è€ƒè™‘ï¼Œè¦ä¹ˆå°±æœ‰è¿™ä¸ªå›¾æ ‡ï¼Œè¦ä¹ˆå°±ç¦æ­¢äº§ç”Ÿè¿™ä¸ªè¯·æ±‚ã€‚\n            return ;\n        &#125;\n\n        console.log(&#39;End of line&#39;);\n        console.log(req.url);\n\n        let myUrl &#x3D; url.parse(req.url);\n        console.log(myUrl);\n\n        router.router(req, res)\n    &#125;\n\n    http.createServer(onRequest).listen(&#39;8888&#39;)\n    console.log(&quot;Server is running at &quot; + &quot;http:&#x2F;&#x2F;localhost:8888&quot;);\n&#125;\n\nexports.start &#x3D; start;\n","slug":"node.jsè·¯ç”±","date":"2020-10-11T07:54:26.000Z","categories_index":"node","tags_index":"node","author_index":"EVE"}]